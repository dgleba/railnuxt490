<!doctype html><html lang="en"><head><script>!function(c,f){var t,o,i,e=[],r={passive:!0,capture:!0},n=new Date,a="pointerup",u="pointercancel";function p(n,e){t||(t=e,o=n,i=new Date,w(f),s())}function s(){0<=o&&o<i-n&&(e.forEach(function(n){n(o,t)}),e=[])}function l(n){if(n.cancelable){var e=(1e12<n.timeStamp?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,e){function t(){p(n,e),i()}function o(){i()}function i(){f(a,t,r),f(u,o,r)}c(a,t,r),c(u,o,r)}(e,n):p(e,n)}}function w(e){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(n){e(n,l,r)})}w(c),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){e.push(n),s()}}(addEventListener,removeEventListener)</script><title data-rh="true">How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2018-04-22T18:35:39.400Z"/><meta data-rh="true" name="title" content="How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT"/><meta data-rh="true" property="og:title" content="How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT"/><meta data-rh="true" property="twitter:title" content="How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT"/><meta data-rh="true" name="twitter:site" content="@Medium"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/cf7dd9da9d16"/><meta data-rh="true" property="al:android:url" content="medium://p/cf7dd9da9d16"/><meta data-rh="true" property="al:ios:url" content="medium://p/cf7dd9da9d16"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="I’ve been a huge fan of Ruby on Rails since the early days, and although the web world has moved on a lot since then, Rails still has a place in this landscape, for rapid app development with clean…"/><meta data-rh="true" property="og:description" content="I’ve been a huge fan of Ruby on Rails since the early days, and although the web world has moved on a lot since then, Rails still has a…"/><meta data-rh="true" property="twitter:description" content="I’ve been a huge fan of Ruby on Rails since the early days, and although the web world has moved on a lot since then, Rails still has a…"/><meta data-rh="true" property="og:url" content="https://medium.com/@fishpercolator/how-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16"/><meta data-rh="true" property="al:web:url" content="https://medium.com/@fishpercolator/how-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/max/1200/1*jHIfNy7ixrRKApsPeqw5Xw.png"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/max/1200/1*jHIfNy7ixrRKApsPeqw5Xw.png"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" property="article:author" content="https://medium.com/@fishpercolator"/><meta data-rh="true" name="twitter:creator" content="@fishpercolator"/><meta data-rh="true" name="author" content="Quinn Daley"/><meta data-rh="true" name="robots" content="index,follow"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" name="twitter:label1" value="Reading time"/><meta data-rh="true" name="twitter:data1" value="10 min read"/><meta data-rh="true" name="parsely-post-id" content="cf7dd9da9d16"/><link data-rh="true" rel="publisher" href="https://plus.google.com/103654360130207659246"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png"/><link data-rh="true" rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717"/><link data-rh="true" rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css"/><link data-rh="true" rel="author" href="https://medium.com/@fishpercolator"/><link data-rh="true" rel="canonical" href="https://medium.com/@fishpercolator/how-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/cf7dd9da9d16"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1200\u002F1*jHIfNy7ixrRKApsPeqw5Xw.png"],"url":"https:\u002F\u002Fmedium.com\u002F@fishpercolator\u002Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16","dateCreated":"2018-03-08T18:16:59.078Z","datePublished":"2018-03-08T18:16:59.078Z","dateModified":"2018-06-18T20:33:22.261Z","headline":"How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT","name":"How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT","description":"I’ve been a huge fan of Ruby on Rails since the early days, and although the web world has moved on a lot since then, Rails still has a place in this landscape, for rapid app development with clean…","identifier":"cf7dd9da9d16","keywords":["Lite:true","Tag:Ruby on Rails","Tag:Nuxtjs","Tag:Vuejs","Tag:Jwt","Tag:Single Page Applications","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_NONE","LayerCake:0"],"author":{"@type":"Person","name":"Quinn Daley","url":"https:\u002F\u002Fmedium.com\u002F@fishpercolator"},"creator":["Quinn Daley"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fmedium.com\u002F","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F616\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fmedium.com\u002F@fishpercolator\u002Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16"}</script><script data-rh="true" >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-24232453-2', 'auto');
ga('send', 'pageview');</script><link rel="preload" href="https://cdn.optimizely.com/js/16180790160.js" as="script"><style type="text/css" data-fela-rehydration="379" data-fela-type="STATIC">html{box-sizing:border-box}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@-moz-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:fixed}.n{top:0}.o{left:0}.p{right:0}.q{z-index:500}.r{box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.05)}.v{display:flex}.w{justify-content:center}.ae{max-width:1032px}.af{min-width:0}.ag{width:100%}.ah{height:65px}.ai{align-items:center}.al{flex:1 0 auto}.am{display:none}.an{fill:rgba(0, 0, 0, 0.84)}.aq{flex:0 0 auto}.ar{color:inherit}.as{fill:inherit}.at{font-size:inherit}.au{border:inherit}.av{font-family:inherit}.aw{letter-spacing:inherit}.ax{font-weight:inherit}.ay{padding:0}.az{margin:0}.ba:hover{cursor:pointer}.bb:hover{color:rgba(0, 0, 0, 0.9)}.bc:hover{fill:rgba(0, 0, 0, 0.9)}.bd:focus{outline:none}.be:disabled{cursor:default}.bf:disabled{color:rgba(0, 0, 0, 0.54)}.bg:disabled{fill:rgba(0, 0, 0, 0.54)}.bh{font-family:medium-content-sans-serif-font, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Arial, sans-serif}.bi{font-style:normal}.bj{line-height:20px}.bk{font-size:15.8px}.bl{letter-spacing:0px}.bm{color:rgba(0, 0, 0, 0.54)}.bn{fill:rgba(0, 0, 0, 0.54)}.bo{margin-left:16px}.bp{color:rgba(2, 158, 116, 1)}.bq{fill:rgba(3, 168, 124, 1)}.br:hover{color:rgba(1, 143, 105, 1)}.bs:hover{fill:rgba(2, 158, 116, 1)}.bt:disabled{color:rgba(3, 168, 124, 0.5)}.bu:disabled{fill:rgba(3, 168, 124, 0.5)}.bv{padding:8px 16px}.bw{background:0}.bx{border-color:rgba(3, 168, 124, 1)}.by:hover{border-color:rgba(2, 158, 116, 1)}.bz{border-radius:4px}.ca{border-width:1px}.cb{border-style:solid}.cc{box-sizing:border-box}.cd{display:inline-block}.ce{text-decoration:none}.cf{margin-bottom:0px}.ch{padding-left:24px}.ci{padding-right:24px}.cj{margin-left:auto}.ck{margin-right:auto}.cl{max-width:728px}.cm{flex-direction:column}.cn{opacity:0}.co{pointer-events:none}.cp{will-change:opacity}.cq{width:131px}.cr{left:50%}.cs{transform:translateX(-516px)}.ct{top:calc(65px + 54px + 40px)}.cv{padding-top:28px}.cw{margin-bottom:19px}.cx{margin-left:-5px}.cy{margin-right:5px}.cz{position:relative}.da{outline:0}.db{border:0}.dc{user-select:none}.dd{cursor:pointer}.de> svg{pointer-events:none}.df:active{border-style:none}.dg{-webkit-user-select:none}.dh{fill:rgba(0, 0, 0, 0.76)}.di:focus{fill:rgba(0, 0, 0, 0.54)}.dj:hover{fill:rgba(0, 0, 0, 0.54)}.dk{margin-top:5px}.dl button{text-align:left}.dm{font-weight:300}.dn{font-size:16px}.do{width:188px}.dp{transform:translateX(406px)}.dq{top:calc(65px + 54px + 14px)}.ds{margin-top:40px}.dt{clear:both}.du{max-width:680px}.dv{flex-wrap:wrap}.dw{margin-top:25px}.dx{list-style-type:none}.dy{margin-right:8px}.dz{margin-bottom:8px}.ea{border-radius:3px}.eb{padding:5px 10px}.ec{background:rgba(0, 0, 0, 0.05)}.ed{line-height:22px}.ee{font-size:15px}.ef{margin-top:15px}.eg{justify-content:space-between}.eh{margin-right:16px}.ei{border:1px solid rgba(0, 0, 0, 0.1)}.ej{border-radius:50%}.ek{height:60px}.el{width:60px}.ey:hover{border-color:rgba(0, 0, 0, 0.54)}.ez:active{border-style:solid}.fa{background:rgba(255, 255, 255, 1)}.fb{z-index:2}.fc{height:100%}.fd{position:absolute}.ff{color:rgba(0, 0, 0, 0.84)}.fg{padding-right:8px}.fh{padding-top:32px}.fi{border-top:1px solid rgba(0, 0, 0, 0.1)}.fj{margin-bottom:25px}.fk{margin-bottom:32px}.fl{min-height:80px}.fq{height:80px}.fr{width:80px}.fs{padding-left:102px}.fu{text-transform:uppercase}.fv{letter-spacing:0.05em}.fw{margin-bottom:6px}.fx{font-weight:600}.fy{font-size:28px}.fz{line-height:36px}.ga{padding:4px 12px}.gb{border-color:rgba(0, 0, 0, 0.54)}.gc:hover{color:rgba(0, 0, 0, 0.97)}.gd:hover{fill:rgba(0, 0, 0, 0.97)}.ge:hover{border-color:rgba(0, 0, 0, 0.84)}.gf:disabled{fill:rgba(0, 0, 0, 0.76)}.gg:disabled{border-color:rgba(0, 0, 0, 0.2)}.gh:disabled{cursor:inherit}.gi:disabled:hover{color:rgba(0, 0, 0, 0.54)}.gj:disabled:hover{fill:rgba(0, 0, 0, 0.76)}.gk:disabled:hover{border-color:rgba(0, 0, 0, 0.2)}.gl{max-width:555px}.gm{max-width:450px}.gn{font-size:18px}.go{line-height:24px}.gq{padding-top:25px}.gr{color:rgba(0, 0, 0, 0.76)}.gs{opacity:1}.gt{padding:20px}.gu{border:1px solid rgba(3, 168, 124, 1)}.gv{text-align:center}.gw{margin-top:64px}.gx{background-color:rgba(0, 0, 0, 0.02)}.gy{padding:60px 0}.gz{background-color:rgba(0, 0, 0, 0.9)}.hq{padding-bottom:48px}.hr{border-bottom:1px solid rgba(255, 255, 255, 0.54)}.hs{margin:0 -12px}.ht{margin:0 12px}.hu{flex:1 1 0}.hv{padding-bottom:12px}.hw:hover{color:rgba(255, 255, 255, 0.99)}.hx:hover{fill:rgba(255, 255, 255, 0.99)}.hy:disabled{color:rgba(255, 255, 255, 0.7)}.hz:disabled{fill:rgba(255, 255, 255, 0.7)}.ia{color:rgba(255, 255, 255, 0.98)}.ib{fill:rgba(255, 255, 255, 0.98)}.ic{text-align:inherit}.id{font-size:21.6px}.ie{letter-spacing:-0.32px}.if{color:rgba(255, 255, 255, 0.7)}.ig{fill:rgba(255, 255, 255, 0.7)}.ih{text-decoration:underline}.ii{padding-bottom:8px}.ij{padding-top:8px}.ik{width:200px}.im:hover{text-decoration:underline}.in{top:calc(100vh + 100px)}.io{bottom:calc(100vh + 100px)}.ip{width:10px}.iq{word-break:break-word}.ir{word-wrap:break-word}.is:after{display:block}.it:after{content:""}.iu:after{clear:both}.iv{line-height:1.23}.iw{letter-spacing:0}.ix{font-family:medium-content-title-font, Georgia, Cambria, "Times New Roman", Times, serif}.iy{font-size:40px}.je{margin-bottom:-0.27em}.jf{line-height:48px}.jg{margin-top:32px}.jh{height:48px}.ji{width:48px}.jj{margin-left:12px}.jk{margin-bottom:2px}.jm{overflow:hidden}.jn{max-height:20px}.jo{text-overflow:ellipsis}.jp{display:-webkit-box}.jq{-webkit-line-clamp:1}.jr{-webkit-box-orient:vertical}.js{margin-left:8px}.jt{padding:0px 8px}.ju{line-height:18px}.kd{max-width:1400px}.kj{padding-bottom:5px}.kk{padding-top:5px}.kl{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}.km{cursor:zoom-in}.kn{z-index:auto}.ko{transition:opacity 100ms 400ms}.kp{will-change:transform}.kq{transform:translateZ(0)}.kr{margin:auto}.ks{background-color:rgba(0, 0, 0, 0.05)}.kt{padding-bottom:35.714285714285715%}.ku{filter:blur(20px)}.kv{transform:scale(1.1)}.kw{visibility:visible}.kx{line-height:1.58}.ky{letter-spacing:-0.004em}.kz{font-family:medium-content-serif-font, Georgia, Cambria, "Times New Roman", Times, serif}.lk{margin-bottom:-0.46em}.ll{background-repeat:repeat-x}.lm{background-image:linear-gradient(to right,rgba(0, 0, 0, 0.84) 100%,rgba(0, 0, 0, 0.84) 0);background-image:url('data:image/svg+xml;utf8,<svg preserveAspectRatio="none" viewBox="0 0 1 1" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="0" x2="1" y2="1" stroke="rgba(0, 0, 0, 0.84)" /></svg>')}.ln{background-size:1px 1px}.lo{background-position:0 1.05em;background-position:0 calc(1em + 1px)}.lp{font-style:italic}.lq{font-weight:700}.lr{font-family:medium-content-slab-serif-font, Georgia, Cambria, "Times New Roman", Times, serif}.ls{border:none}.lt{margin-top:30px}.lu:before{content:"..."}.lv:before{letter-spacing:0.6em}.lw:before{text-indent:0.6em}.lx:before{font-style:italic}.ly:before{line-height:1.4}.lz{line-height:1.12}.ma{letter-spacing:-0.022em}.ml{margin-bottom:-0.28em}.mr{padding-bottom:NaN%}.ms{list-style-type:disc}.mt{margin-left:30px}.mu{padding-left:0px}.na{list-style-type:decimal}.nb{box-shadow:inset 3px 0 0 0 rgba(0, 0, 0, 0.84)}.nc{padding-left:23px}.nd{margin-left:-20px}.ne{max-width:1664px}.nf{padding-bottom:61.83894230769231%}.ng{line-height:1.4}.nh{margin-top:10px}.nk{max-width:960px}.nl{padding-bottom:81.35416666666667%}.nm{max-width:1230px}.nn{padding-bottom:80.16260162601625%}.no{max-width:919px}.np{padding-bottom:78.23721436343853%}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.ac{margin:0 24px}.hn{padding-left:24px}.ho{padding-right:24px}.hp{max-width:1080px}.jd{margin-top:0.78em}.kc{max-width:1032px}.ki{margin-top:56px}.li{font-size:21px}.lj{margin-top:2em}.mj{font-size:34px}.mk{margin-top:1.25em}.mq{margin-top:0.86em}.mz{margin-top:1.05em}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.hk{padding-left:24px}.hl{padding-right:24px}.hm{max-width:1080px}.ni{margin-left:auto}.nj{text-align:center}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.hh{padding-left:24px}.hi{padding-right:24px}.hj{max-width:904px}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.aj{height:56px}.ak{display:flex}.ao{margin-left:-5px}.ap{display:block}.cg{margin-bottom:0px}.fm{margin-bottom:24px}.fn{align-items:center}.fo{width:102px}.fp{position:relative}.ft{padding-left:0}.gp{margin-top:24px}.ha{padding:32px 0}.he{padding-left:24px}.hf{padding-right:24px}.hg{max-width:728px}.il{width:140px}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.x{margin:0 24px}.hb{padding-left:24px}.hc{padding-right:24px}.hd{max-width:552px}.iz{margin-top:0.39em}.jl{margin-bottom:0px}.jv{margin:0}.jw{max-width:100%}.ke{margin-top:40px}.la{font-size:18px}.lb{margin-top:1.56em}.mb{font-size:30px}.mc{margin-top:0.93em}.mm{margin-top:0.67em}.mv{margin-top:1.34em}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.ab{margin:0 24px}.jc{margin-top:0.78em}.kb{max-width:1032px}.kh{margin-top:56px}.lg{font-size:21px}.lh{margin-top:2em}.mh{font-size:34px}.mi{margin-top:1.25em}.mp{margin-top:0.86em}.my{margin-top:1.05em}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.z{margin:0 24px}.jb{margin-top:0.78em}.jz{margin:0}.ka{max-width:100%}.kg{margin-top:56px}.le{font-size:21px}.lf{margin-top:2em}.mf{font-size:34px}.mg{margin-top:1.25em}.mo{margin-top:0.86em}.mx{margin-top:1.05em}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.y{margin:0 24px}.ja{margin-top:0.39em}.jx{margin:0}.jy{max-width:100%}.kf{margin-top:40px}.lc{font-size:18px}.ld{margin-top:1.56em}.md{font-size:30px}.me{margin-top:0.93em}.mn{margin-top:0.67em}.mw{margin-top:1.34em}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="print">.u{display:none}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.s{transition:transform 300ms ease}.t{will-change:transform}.cu{transition:opacity 200ms}.em{transition:border-color 150ms ease}.en::before{background:
      radial-gradient(circle, rgba(0, 0, 0, 0.84) 60%, transparent 70%)
    }.eo::before{border-radius:50%}.ep::before{content:""}.eq::before{display:block}.er::before{z-index:0}.es::before{left:0}.et::before{height:100%}.eu::before{position:absolute}.ev::before{top:0}.ew::before{width:100%}.ex:hover::before{animation:k1 2000ms infinite cubic-bezier(.1,.12,.25,1)}.fe{transition:fill 200ms ease}</style><style type="text/css" data-fela-rehydration="379" data-fela-type="RULE" media="all and (max-width: 1230px)">.dr{display:none}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><script>window.PARSELY = window.PARSELY || {autotrack: false}</script><nav class="l m n o p c q r s t u"><div class="branch-journeys-top"><div class="v w"><div class="x y z ab ac ae af ag"><div class="ah v ai aj ak"><div class="l al q"><div class="v ai"><a href="/?source=post_page-----cf7dd9da9d16----------------------" aria-label="Homepage" rel="noopener"><div class="am g"><svg height="22" width="112" viewBox="0 0 111.5 22" class="an"><path d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z"></path></svg></div><div class="l ao ap"><svg width="45" height="45" viewBox="0 0 45 45" class="an"><path d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.69-.32 1.03L10.8 31.4v.4h6.97v-.4L15.3 28.4c-.29-.34-.34-.5-.34-1.03v-8.95l6.13 13.36h.71l5.26-13.36v10.64c0 .3 0 .35-.19.53l-1.85 1.8v.4h9.2v-.4l-1.83-1.8c-.18-.18-.2-.24-.2-.53V15.94c0-.3.02-.35.2-.53l1.82-1.8v-.4h-6.47l-4.62 11.55-5.2-11.54h-6.8v.4l2.15 2.63c.24.3.29.37.29.77v10.35z"></path></svg></div></a></div></div><div class="l aq q"><div class="v ai"><div class="v g"><div><a href="https://medium.com/membership?source=upgrade_membership---nav_full------------------------" class="ar as at au av aw ax ay az ba bb bc bd be bf bg" rel="noopener"><span class="bh b bi bj bk bl l bm bn">Become a member</span></a></div><div class="bo l"><span class="bh b bi bj bk bl l bm bn"><a href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2F%40fishpercolator%2Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16&amp;source=post_page-----cf7dd9da9d16---------------------nav_reg-" class="bp bq at au av aw ax ay az ba br bs bd be bt bu" rel="noopener">Sign in</a></span></div></div><div class="bo l"><button class="bv bw bp bq bx br bs by ba bz bh b bi bj bk bl ca cb cc cd ce bd">Get started</button></div></div></div></div></div></div></div></nav><div class="cf ah l cg aj"></div><article><section class="ch ci cj ck ag cl cc v cm"></section><span class="l"></span><div><div class="fd o in io ip co"></div><section class="iq ir is it iu"><div class="v w"><div class="x y z ab ac du af ag"><div><div id="8c89" class="iv iw ff bi ix b iy iz ja jb jc jd je"><h1 class="ix b iy jf ff">How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT</h1></div><div class="jg"><div class="ai v"><div><a rel="noopener" href="/@fishpercolator?source=post_page-----cf7dd9da9d16----------------------"><img alt="Quinn Daley" class="l ej jh ji" src="https://miro.medium.com/fit/c/96/96/2*S7RXW9SAoHSOBu8dWz7TXA.jpeg" width="48" height="48"/></a></div><div class="jj ag l"><div class="v"><div style="flex:1"><span class="bh b bi bj bk bl l ff an"><div class="jk v ai jl"><span class="bh dm dn bj jm jn jo jp jq jr ff"><a class="ar as at au av aw ax ay az ba im bd be bf bg" rel="noopener" href="/@fishpercolator?source=post_page-----cf7dd9da9d16----------------------">Quinn Daley</a></span><div class="js l aq h"><button class="jt ff an bw gb gc gd ge ba bf gf gg gh gi gj gk bz bh b bi ju ee bl ca cb cc cd ce bd">Follow</button></div></div></span></div></div><span class="bh b bi bj bk bl l bm bn"><span class="bh dm dn bj jm jn jo jp jq jr bm"><div><a class="ar as at au av aw ax ay az ba im bd be bf bg" rel="noopener" href="/@fishpercolator/how-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16?source=post_page-----cf7dd9da9d16----------------------">Mar 8, 2018</a> <!-- -->·<!-- --> <!-- -->10<!-- --> min read</div></span></span></div></div></div></div></div></div><div class="dt"><div class="v w"><div class="jv jw jx jy jz ka ab kb ac kc af ag"><figure class="ke kf kg kh ki dt kj kk paragraph-image"><div class="kl km cz kn ag"><div class="cj ck kd"><div class="kr l cz ks"><div class="kt l"><div class="cn ko fd n o fc ag jm kp kq"><img class="fd n o fc ag ku kv kw" src="https://miro.medium.com/max/60/1*jHIfNy7ixrRKApsPeqw5Xw.png?q=20" width="1400" height="500" role="presentation"/></div><img class="cn ko fd n o fc ag fa" width="1400" height="500" role="presentation"/><noscript><img class="fd n o fc ag" src="https://miro.medium.com/max/2800/1*jHIfNy7ixrRKApsPeqw5Xw.png" width="1400" height="500" role="presentation"/></noscript></div></div></div></div></figure></div></div></div><div class="v w"><div class="x y z ab ac du af ag"><p id="3771" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">I’ve been a huge fan of <a href="http://rubyonrails.org/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Ruby on Rails</a> since the early days, and although the web world has moved on a lot since then, Rails still has a place in this landscape, for rapid app development with clean, maintainable code.</p><p id="9733" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">But the web world has changed. The rise of <a href="https://developers.google.com/web/progressive-web-apps/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Progressive Web Apps</a> (and mobile apps before them) has led to a world where users want a strong interactive interface from their web apps: clicking on links and downloading the next page of UI from the server feels like something people did in the 2000s.</p><p id="0012" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">I’ve recently become a big fan of <a href="https://nuxtjs.org/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Nuxt.js</a>, which I have started to think of as “the Rails of frontend”. Nuxt is an app development framework based around Webpack and <a href="https://vuejs.org/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Vue.js</a>. It does have a backend but, in my experience, it really shines when it is used in <em class="lp">generate</em> mode to build serverless applications that can be deployed on services that normally do static content, like GitHub Pages or S3. Examples of serverless applications I’ve built using Nuxt include <a href="https://www.fishpercolator.co.uk/maple/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Maple</a> and <a href="https://www.fishpercolator.co.uk/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">my business website</a>, both running on GitHub Pages.</p><p id="c691" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">A lot of buzz in the Rails world right now is around <a href="http://guides.rubyonrails.org/api_app.html" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Rails API</a>: a stripped down version of Rails that can be used to build API-only server apps that then hook up to whatever frontends you like: mobile apps or browser-based apps such as those built with Nuxt.</p><p id="1af7" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">But there seems to be a dearth of guides about how you would actually do this, especially when considering <em class="lp">authentication</em>. How can you provide a login interface in the frontend that logs your users into the backend?</p><p id="8f26" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">So here goes. A somewhat lengthy blog post that goes through, step-by-step, the process of building a simple decoupled web application in Rails API and Nuxt, and building an incredibly basic authentication system using <a href="https://github.com/waiting-for-dev/devise-jwt" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Devise-JWT</a>.</p><p id="b3ce" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Note: This guide assumes a reasonably good knowledge of Rails, a passing knowledge of Vue.js and at least a basic grasp of Docker.</p><p id="3e0e" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk"><strong class="kz lq">If you want to see the finished application, or you get stuck at any point, </strong><a href="https://github.com/fishpercolator/autheg" class="ar ce ll lm ln lo" target="_blank" rel="noopener"><strong class="kz lq">you can refer to the source code on GitHub</strong></a><strong class="kz lq">.</strong></p></div></div></section><hr class="lr dm fy ls lt gv lu lv lw lx ly"/><section class="iq ir is it iu"><div class="v w"><div class="x y z ab ac du af ag"><h1 id="ba59" class="lz ma ff bi bh fx mb mc md me mf mg mh mi mj mk ml">Part 1: Creating a development environment</h1><p id="a288" class="kx ky ff bi kz b la mm lc mn le mo lg mp li mq lk">Before we start coding, we’ll need a development environment. I like to use Docker for this, because it keeps everything separated. Chances are in production your database, backend and frontend will all be running in different places so let’s start as we mean to go on in order to avoid accidental coupling.</p><p id="c3db" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">First, let’s create blank Rails API and Nuxt applications:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/755b92bbbbac7c2681655bc011d70844" allowfullscreen="" frameBorder="0" height="0" width="0" title="create.sh" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="e569" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">This assumes you have the ‘rails’ and ‘vue’ CLIs installed on your host machine. You can of course use the Docker images for these CLIs if you don’t.</p><p id="29bf" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">The various options to <em class="lp">rails new</em> cause it to skip adding tests, Action Cable and Spring, and also to stop it from running <em class="lp">bundle</em> on your host machine (we’ll want to run this inside Docker). Similarly, we use <em class="lp">yarn generate-lock-entry</em> to generate the yarn.lock file without having to install the packages.</p><p id="f193" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Next, create small Dockerfiles to build the frontend and backend environments, and a docker-compose.yml to describe how they and the database fit together:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/1c3dd10aff8fa7145fe56b0666f7460e" allowfullscreen="" frameBorder="0" height="0" width="0" title="autheg-backend Dockerfile" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="5258" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Some things to note here:</p><ul class=""><li id="b090" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk ms mt mu">Gems and yarn packages are installed into the mounted volumes. This will stop you from needing to rebuild the whole Docker image every time you change the Gemfile or package.json.</li><li id="63ad" class="kx ky ff bi kz b la mv lc mw le mx lg my li mz lk ms mt mu">This assumes your host user ID is 1001 and creates a user inside each container with the same user ID. If your user ID is different, you can set the UID environment variable before building and it will pass that as an arg to the build.</li><li id="c917" class="kx ky ff bi kz b la mv lc mw le mx lg my li mz lk ms mt mu">You’ll probably want to add node_modules to the frontend .dockerignore &amp; .gitignore and vendor/bundle, log, tmp, to the backend ones. That way they won’t be copied during build time.</li></ul><p id="8bdb" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Now it’s time to build everything:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/16a0cd5158340e2a4cad1e11f5968ba5" allowfullscreen="" frameBorder="0" height="0" width="0" title="build.sh" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="2363" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">The reason you need to run bundle and yarn <em class="lp">after</em> building is because your docker-compose file <em class="lp">mounts</em> your host volumes into the containers so you need to install the packages into the host volumes as well as the images that are used to create the containers.</p><p id="12bd" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">A couple of last things before you can bring this environment up:</p><ol class=""><li id="4e46" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk na mt mu">Edit <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-backend/config/database.yml" class="ar ce ll lm ln lo" target="_blank" rel="noopener">database.yml</a> to set the hostname to ‘db’ and the user to ‘postgres’.</li><li id="af05" class="kx ky ff bi kz b la mv lc mw le mx lg my li mz lk na mt mu">Edit <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-frontend/package.json" class="ar ce ll lm ln lo" target="_blank" rel="noopener">package.json</a> to change the ‘dev’ script to ‘HOST=0.0.0.0 nuxt’ (so it’s visible on your host machine).</li><li id="ef12" class="kx ky ff bi kz b la mv lc mw le mx lg my li mz lk na mt mu">Run ‘docker-compose run backend rails db:create’ to create the development database.</li></ol><p id="f694" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">All being well, you should now be able to type:</p><blockquote class="nb nc nd"><p id="3aff" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">docker-compose up</p></blockquote><p id="0303" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">And your environment (database, backend and frontend) will spin up. You can check the web interfaces on :8080 and :3000 and you should see the default pages for each.</p><figure class="ke kf kg kh ki dt cj ck paragraph-image"><div class="kl km cz kn ag"><div class="cj ck ne"><div class="kr l cz ks"><div class="nf l"><div class="cn ko fd n o fc ag jm kp kq"><img class="fd n o fc ag ku kv kw" src="https://miro.medium.com/max/60/1*hoai7Zion_e9-0uZQGr1Sw.png?q=20" width="1664" height="1029" role="presentation"/></div><img class="cn ko fd n o fc ag fa" width="1664" height="1029" role="presentation"/><noscript><img class="fd n o fc ag" src="https://miro.medium.com/max/3328/1*hoai7Zion_e9-0uZQGr1Sw.png" width="1664" height="1029" role="presentation"/></noscript></div></div></div></div></figure><p id="7f47" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">The frontend one is actually a <a href="https://github.com/webpack/webpack-dev-server" class="ar ce ll lm ln lo" target="_blank" rel="noopener">webpack-dev-server</a>, which you might not be used to if you’re an old-school Rails coder. Changes you make to the UI will be reflected <em class="lp">immediately</em> in your browser, without needing to reload. This is an exciting change!</p><p id="c867" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Right! Get your project committed to version control and then let’s start building some stuff!</p></div></div></section><hr class="lr dm fy ls lt gv lu lv lw lx ly"/><section class="iq ir is it iu"><div class="v w"><div class="x y z ab ac du af ag"><h1 id="aa2e" class="lz ma ff bi bh fx mb mc md me mf mg mh mi mj mk ml">Part 2: Getting them talking to each other</h1><p id="428b" class="kx ky ff bi kz b la mm lc mn le mo lg mp li mq lk">Let’s build our first API method. We’re just going to create a resource called “example” that has a name and a colour, and create 3 of these for testing.</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/7345cee61a2b4b6354a09fa79232afed" allowfullscreen="" frameBorder="0" height="0" width="0" title="create-resource.sh" class="fd n o fc ag" scrolling="auto"></iframe></div></div><figcaption class="bm dn ng nh gv cl cj ck ni nj bh dm">(From now on, <strong class="ax">&gt;</strong> means “run from a backend bash”.)</figcaption></figure><p id="c27a" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Edit routes.rb to move the new route into an api scope, and add a simple index method to the ExamplesController:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/a8b5acc5d7e7df337cce7154b4db0afc" allowfullscreen="" frameBorder="0" height="0" width="0" title="examples_controller.rb" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="a58b" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Make sure your ApplicationController tells all its children they can respond to requests for JSON (this is necessary for some gems, like Devise):</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/497827479ac09b33afa586d924df5b5f" allowfullscreen="" frameBorder="0" height="0" width="0" title="application_controller.rb" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="82ae" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk"><strong class="kz lq"><em class="lp">[Edit: You might actually need to wait until Devise is installed to do this, because it looks like there’s a dependency issue if you do it this early. Let me know if you have any ideas about how to introduce these this early.]</em></strong></p><p id="d4a7" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Now immediately you should be able to visit <a href="http://localhost:8080/api/examples" class="ar ce ll lm ln lo" target="_blank" rel="noopener">http://localhost:8080/api/examples</a> to see your API in action:</p><figure class="ke kf kg kh ki dt cj ck paragraph-image"><div class="kl km cz kn ag"><div class="cj ck nk"><div class="kr l cz ks"><div class="nl l"><div class="cn ko fd n o fc ag jm kp kq"><img class="fd n o fc ag ku kv kw" src="https://miro.medium.com/max/60/1*76hf6XcYJM_xLdpbd0jZGw.png?q=20" width="960" height="781" role="presentation"/></div><img class="cn ko fd n o fc ag fa" width="960" height="781" role="presentation"/><noscript><img class="fd n o fc ag" src="https://miro.medium.com/max/1920/1*76hf6XcYJM_xLdpbd0jZGw.png" width="960" height="781" role="presentation"/></noscript></div></div></div></div></figure><p id="92fc" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Now for the fun part: we’ll hook the frontend up to the backend. But first, don’t forget to commit to version control!</p><p id="2144" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">We’re going to use <a href="https://github.com/axios/axios" class="ar ce ll lm ln lo" target="_blank" rel="noopener">axios</a> to talk to the API, and <a href="https://vuetifyjs.com/en/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">vuetify</a> as a UI kit. (You can use HTML and CSS in Vue, but there are also deeper UI integrations: vuetify is a UI kit based on Material Design.) Both of these have integrations with Nuxt available in the community, so let’s install those:</p><blockquote class="nb nc nd"><p id="8539" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">docker-compose run frontend yarn add <a href="http://twitter.com/nuxtjs/axios" class="ar ce ll lm ln lo" target="_blank" rel="noopener">@nuxtjs/axios</a> <a href="http://twitter.com/nuxtjs/vuetify" class="ar ce ll lm ln lo" target="_blank" rel="noopener">@nuxtjs/vuetify</a></p></blockquote><p id="df44" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">and add to the Nuxt config file:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/823ac8d0a43f3b22f2009757251f4782" allowfullscreen="" frameBorder="0" height="0" width="0" title="fragment of nuxt.config.js" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="9187" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">(Obviously in production you’ll want to move the axios config to the environment, but for now it’s OK to hardcode it.)</p><p id="2d5a" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Now let’s replace the layouts/default.vue and pages/index.vue that Nuxt has created for us:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/77e8c373c5b74ba76d94c7d7341b9372" allowfullscreen="" frameBorder="0" height="0" width="0" title="default.vue" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="c019" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">The default.vue is a standard vuetify layout, with a toolbar containing a link to the homepage. The <em class="lp">nuxt</em> option to the link tells it to use Nuxt’s router to handle the link, rather than doing it in the browser.</p><p id="2e36" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">index.vue is a little more complex: the <em class="lp">mounted()</em> method is called when the template is initialized, and that in turn calls the <em class="lp">updateExamples()</em>, which uses the axios integration to set the examples variable to the results of the API method. The &lt;v-list&gt; contains a reactive set of tiles that is automatically populated based on whatever is in examples (so it will be empty at first and then fill out when the API method completes).</p><p id="f6ef" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">But if you try to visit this now you get an unfortunate error:</p><figure class="ke kf kg kh ki dt cj ck paragraph-image"><div class="kl km cz kn ag"><div class="cj ck nk"><div class="kr l cz ks"><div class="nl l"><div class="cn ko fd n o fc ag jm kp kq"><img class="fd n o fc ag ku kv kw" src="https://miro.medium.com/max/60/1*5PhACGlQd7cfjiA-DqksuA.png?q=20" width="960" height="781" role="presentation"/></div><img class="cn ko fd n o fc ag fa" width="960" height="781" role="presentation"/><noscript><img class="fd n o fc ag" src="https://miro.medium.com/max/1920/1*5PhACGlQd7cfjiA-DqksuA.png" width="960" height="781" role="presentation"/></noscript></div></div></div></div></figure><p id="d768" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">JavaScript isn’t allowed to query endpoints on other domains unless those domains set the <a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" class="ar ce ll lm ln lo" target="_blank" rel="noopener">CORS</a> headers appropriately. Luckily, Rails API has predicted we’ll want that!</p><p id="d139" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Uncomment the ‘rack-cors’ line in the Gemfile and uncomment the code in <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-backend/config/initializers/cors.rb" class="ar ce ll lm ln lo" target="_blank" rel="noopener">cors.rb</a>, changing example.com to localhost:3000 (or *). Install the gem:</p><blockquote class="nb nc nd"><p id="edeb" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">docker-compose run -u root backend bundle</p></blockquote><p id="b43b" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">and restart your docker containers by hitting Ctrl-C on the running ones and doing <em class="lp">docker-compose up</em> again. Fingers crossed now you’ll see something like this:</p><figure class="ke kf kg kh ki dt cj ck paragraph-image"><div class="kl km cz kn ag"><div class="cj ck nk"><div class="kr l cz ks"><div class="nl l"><div class="cn ko fd n o fc ag jm kp kq"><img class="fd n o fc ag ku kv kw" src="https://miro.medium.com/max/60/1*LUreZEc1i0c5WfhoDCLxSQ.png?q=20" width="960" height="781" role="presentation"/></div><img class="cn ko fd n o fc ag fa" width="960" height="781" role="presentation"/><noscript><img class="fd n o fc ag" src="https://miro.medium.com/max/1920/1*LUreZEc1i0c5WfhoDCLxSQ.png" width="960" height="781" role="presentation"/></noscript></div></div></div></div></figure><p id="b3c9" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Woohoo! Your frontend app is displaying data directly from the backend! Try adding a new example to the database (e.g. ‘qux/cyan’) to confirm your frontend is really retrieving data from your backend.</p><p id="923d" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Commit to version control and get yourself a coffee. Next up is the authentication and it’s a little trickier!</p></div></div></section><hr class="lr dm fy ls lt gv lu lv lw lx ly"/><section class="iq ir is it iu"><div class="v w"><div class="x y z ab ac du af ag"><h1 id="5639" class="lz ma ff bi bh fx mb mc md me mf mg mh mi mj mk ml">Part 3: Authentication with Devise-JWT</h1><p id="81f9" class="kx ky ff bi kz b la mm lc mn le mo lg mp li mq lk"><a href="https://github.com/waiting-for-dev/devise-jwt" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Devise-JWT</a> is an extension to the popular Rails authentication library Devise to add support for <a href="https://en.wikipedia.org/wiki/JSON_Web_Token" class="ar ce ll lm ln lo" target="_blank" rel="noopener">JSON Web Token</a>, a popular implementation of single sign-on. If you Google around, you’ll find lots of people saying it’s easy to add JWT to Devise yourself, but not if you want to properly take advantage of all the features of Devise, and not if you want to log out (i.e. make a token invalid).</p><p id="172a" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">First, add ‘devise’ and ‘devise-jwt’ to your Gemfile and run:</p><blockquote class="nb nc nd"><p id="02cb" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">docker-compose run -u root backend bundle</p></blockquote><p id="76f1" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Then you’re going to want to follow the instructions to <a href="https://github.com/plataformatec/devise#getting-started" class="ar ce ll lm ln lo" target="_blank" rel="noopener">install Devise</a>. Since we’re using an API you don’t have to worry too much about the view layer stuff. I just did:</p><blockquote class="nb nc nd"><p id="fe7b" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">&gt; rails g devise:install<br/>&gt; rails g devise user<br/>&gt; rails db:migrate</p></blockquote><p id="52e6" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Devise-JWT doesn’t have an installer, but it has good installation instructions. You need to decide how you want to invalidate tokens. I went for the blacklist option. For example:</p><blockquote class="nb nc nd"><p id="a4f1" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">&gt; rails g model jwt_blacklist jti:string:index exp:datetime</p></blockquote><p id="37c2" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Edit the migration to <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-backend/db/migrate/20180302172533_create_jwt_blacklists.rb" class="ar ce ll lm ln lo" target="_blank" rel="noopener">add <em class="lp">null: false</em> and remove the timestamps</a> and add “include Devise::JWT::RevocationStrategies::Blacklist” to <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-backend/app/models/jwt_blacklist.rb#" class="ar ce ll lm ln lo" target="_blank" rel="noopener">the model</a>.</p><p id="f2e3" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">To enable JWT, you’ll need to add jwt_secret to the <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-backend/config/secrets.yml" class="ar ce ll lm ln lo" target="_blank" rel="noopener">secrets.yml</a> file (you can create new secrets with “rails secret”), and add this to <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-backend/config/initializers/devise.rb" class="ar ce ll lm ln lo" target="_blank" rel="noopener">devise.rb</a>:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/558525451eec7c844c86a9bc811ed6ed" allowfullscreen="" frameBorder="0" height="0" width="0" title="devise.rb" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="5ebb" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">you need to update the devise line in <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-backend/app/models/user.rb" class="ar ce ll lm ln lo" target="_blank" rel="noopener">your user model</a> to add:</p><blockquote class="nb nc nd"><p id="eba6" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">:jwt_authenticatable, jwt_revocation_strategy: JwtBlacklist</p></blockquote><p id="fad7" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Run “rails db:migrate” again to create your blacklist.</p><p id="d43c" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Move the devise_for route in routes.rb into your :api scope and restart your containers.</p><p id="4343" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">You should now be able to test your API using something like <a href="http://yet-another-rest-client.com/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">YARC</a>. First, create yourself a user in the Rails console:</p><blockquote class="nb nc nd"><p id="4775" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">&gt; rails c<br/>&gt;&gt; User.create!(email: ‘<a href="mailto:test@example.com" class="ar ce ll lm ln lo" target="_blank" rel="noopener">test@example.com</a>’, password: ‘password’)</p></blockquote><p id="7145" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Then try creating a POST message to your /api/users/sign_in endpoint that looks like this:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/2de46715e8c63cc3fab284f1d825bcbf" allowfullscreen="" frameBorder="0" height="0" width="0" title="login.json" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="fdd2" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">And you should see an Authorization header come back with the successful sign-in:</p><figure class="ke kf kg kh ki dt cj ck paragraph-image"><div class="kl km cz kn ag"><div class="cj ck nm"><div class="kr l cz ks"><div class="nn l"><div class="cn ko fd n o fc ag jm kp kq"><img class="fd n o fc ag ku kv kw" src="https://miro.medium.com/max/60/1*2cTvgN1s2-6VkCLknzuwXQ.png?q=20" width="1230" height="986" role="presentation"/></div><img class="cn ko fd n o fc ag fa" width="1230" height="986" role="presentation"/><noscript><img class="fd n o fc ag" src="https://miro.medium.com/max/2460/1*2cTvgN1s2-6VkCLknzuwXQ.png" width="1230" height="986" role="presentation"/></noscript></div></div></div></div></figure><p id="e286" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Awesome. We’re getting there, I promise!</p><p id="b6ae" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">We want to use Nuxt’s own auth library, which expects the JWT to be returned in the body of the sign in request, and also wants to make a separate API request to find out the user’s details such as their profile information. So let’s override Devise’s session controller.</p><p id="14e3" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Change the devise config in routes.rb to say you’ve overridden the controller, and add an additional ‘current’ endpoint:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/96b7d2981da812dca11d98a6a654df2c" allowfullscreen="" frameBorder="0" height="0" width="0" title="routes.rb" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="d0fd" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Then let’s add that controller file and two views. If you use jbuilder here you’ll need to uncomment jbuilder in the Gemfile, run “docker-compose run -u root backend bundle” and restart your containers again.</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/46834d2923c4425059d6de81748df7c2" allowfullscreen="" frameBorder="0" height="0" width="0" title="create.json.jbuilder" class="fd n o fc ag" scrolling="auto"></iframe></div></div><figcaption class="bm dn ng nh gv cl cj ck ni nj bh dm">Add the views to app/views/devise/sessions</figcaption></figure><p id="16f1" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Now try these methods out. Do the earlier POST and this time the token should come back in the response body as well as the headers.</p><p id="65e0" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Try doing a GET to the /api/users/current endpoint with that “Authorization: Bearer $token” header and see if you can get back the user’s ID and email.</p><p id="0608" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Woop! One last thing: let’s make the ExamplesController require authentication. Add to that controller:</p><blockquote class="nb nc nd"><p id="dafa" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">before_action :authenticate_user!</p></blockquote><p id="d664" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">If you go back to your frontend app, you should now see it’s failing because of a 401 Unauthorized error. Time to add authentication to the frontend!</p><p id="ea6a" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Install the <a href="https://github.com/nuxt-community/auth-module" class="ar ce ll lm ln lo" target="_blank" rel="noopener">Nuxt auth library</a>:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/d2bab206ca853eac8e3583c1901d2271" allowfullscreen="" frameBorder="0" height="0" width="0" title="fragment of nuxt.config.js" class="fd n o fc ag" scrolling="auto"></iframe></div></div><figcaption class="bm dn ng nh gv cl cj ck ni nj bh dm">The index.js goes in store/ to enable the Vuex store</figcaption></figure><p id="f76c" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Restart your containers before continuing to enable this new config.</p><p id="51a6" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Let’s create a user page <em class="lp">login.vue</em> with login/logout controls based on the user’s current status:</p><figure class="ke kf kg kh ki dt"><div class="kr l cz"><div class="mr l"><iframe src="https://medium.com/media/8a90659f85ee7045e2c9cfb0b8a4940e" allowfullscreen="" frameBorder="0" height="0" width="0" title="login.vue" class="fd n o fc ag" scrolling="auto"></iframe></div></div></figure><p id="62fb" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">There’s quite a lot going on here but it should be reasonably easy to work out. The <em class="lp">login()</em> method calls the equivalent method in the auth library, passing the appropriate JSON object that Devise is expecting. If there’s an error, it sets <em class="lp">error</em>, which is being watched for by the &lt;v-alert&gt;.</p><p id="b0de" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">And finally, you’ll want users to be redirected if they’re not signed in. By default, the auth middleware redirects users to login.vue if they’re not signed in, so we just have to enable the auth middleware on <a href="https://github.com/fishpercolator/autheg/blob/master/autheg-frontend/pages/index.vue" class="ar ce ll lm ln lo" target="_blank" rel="noopener">index.vue</a>:</p><blockquote class="nb nc nd"><p id="ff13" class="kx ky ff lp kz b la lb lc ld le lf lg lh li lj lk">middleware: [‘auth’],</p></blockquote><p id="c17a" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">You might also want to add a link to /login to the toolbar in default.vue. It’s up to you.</p><p id="a7d4" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">Now try out your frontend app again!</p><figure class="ke kf kg kh ki dt cj ck paragraph-image"><div class="kl km cz kn ag"><div class="cj ck no"><div class="kr l cz ks"><div class="np l"><div class="cn ko fd n o fc ag jm kp kq"><img class="fd n o fc ag ku kv kw" src="https://miro.medium.com/max/60/1*012-LUDxJttnF6Jtn0Cm7A.png?q=20" width="919" height="719" role="presentation"/></div><img class="cn ko fd n o fc ag fa" width="919" height="719" role="presentation"/><noscript><img class="fd n o fc ag" src="https://miro.medium.com/max/1838/1*012-LUDxJttnF6Jtn0Cm7A.png" width="919" height="719" role="presentation"/></noscript></div></div></div></div><figcaption class="bm dn ng nh gv cl cj ck ni nj bh dm">Redirected to the login page when signed out</figcaption></figure><figure class="ke kf kg kh ki dt cj ck paragraph-image"><div class="kl km cz kn ag"><div class="cj ck no"><div class="kr l cz ks"><div class="np l"><div class="cn ko fd n o fc ag jm kp kq"><img class="fd n o fc ag ku kv kw" src="https://miro.medium.com/max/60/1*X7EYUzlYqfSEDGUlTaK7vQ.png?q=20" width="919" height="719" role="presentation"/></div><img class="cn ko fd n o fc ag fa" width="919" height="719" role="presentation"/><noscript><img class="fd n o fc ag" src="https://miro.medium.com/max/1838/1*X7EYUzlYqfSEDGUlTaK7vQ.png" width="919" height="719" role="presentation"/></noscript></div></div></div></div><figcaption class="bm dn ng nh gv cl cj ck ni nj bh dm">But I can see my examples when signed in!</figcaption></figure><p id="fab0" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk">This is where I leave you! It really is just the very beginning of the auth integration, but I hope you can see it’s not a huge amount of work to get going. You’ll want to add registration, and do things like make sure expired tokens don’t take precedence over credentials when signing in. <em class="lp">[Edit: The maintainers of the auth module have agreed that expired tokens shouldn’t be sent with login request, and @nuxtjs/auth 4.2.0 fixes the issue.]</em> The auth <a href="https://auth.nuxtjs.org/" class="ar ce ll lm ln lo" target="_blank" rel="noopener">documentation</a> and <a href="https://github.com/nuxt-community/auth-module/tree/dev/examples" class="ar ce ll lm ln lo" target="_blank" rel="noopener">demo apps</a> are a good place to start.</p><p id="d5e6" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk"><strong class="kz lq"><em class="lp">If this article’s been helpful, please share it around, throw me a few claps, or let me know how you’re getting on in the comments.</em></strong></p><p id="4148" class="kx ky ff bi kz b la lb lc ld le lf lg lh li lj lk"><a class="ar ce ll lm ln lo" target="_blank" rel="noopener" href="/@fishpercolator/deploying-your-nuxt-rails-api-app-to-production-with-heroku-54efd09eec22"><strong class="kz lq">Update</strong>: You can now read this followup about how to deploy to Heroku!</a></p></div></div></section></div></article><div class="cn co cp m cq cr cs ct cu e" data-test-id="post-sidebar"><div class="v cm"><div class="cv cw cx v"><div class="v ai"><div class="cy l cz"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40fishpercolator%2Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16&amp;source=post_sidebar-----cf7dd9da9d16---------------------clap_sidebar-" class="ar as at au av aw ax ay az ba bb bc bd be bf bg" rel="noopener"><div class="ay da db dc dd de df dg dh di dj"><svg width="29" height="29"><g fill-rule="evenodd"><path d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="dk l"><div class="dl"><h4 class="bh dm dn bj bm"><button class="ar as at au av aw ax ay az ba bb bc bd be bf bg">1.1K </button></h4></div></div></div></div><div><div class="cd"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40fishpercolator%2Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16&amp;source=post_sidebar--------------------------bookmark_sidebar-" class="ar as at au av aw ax ay az ba bb bc bd be bf bg" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div><div class="cn co cp m do cr dp dq cu dr"></div><div><div class="ds dt v cm w"><div class="v w"><div class="x y z ab ac du af ag"><div class="v dv"></div><div class="v ai dv"></div><div class="dw l"><ul class="ay az"><li class="cd dx dy dz"><a href="/tag/ruby-on-rails" class="ea eb ce bm l ec ed a b ee">Ruby on Rails</a></li><li class="cd dx dy dz"><a href="/tag/nuxtjs" class="ea eb ce bm l ec ed a b ee">Nuxtjs</a></li><li class="cd dx dy dz"><a href="/tag/vuejs" class="ea eb ce bm l ec ed a b ee">Vuejs</a></li><li class="cd dx dy dz"><a href="/tag/jwt" class="ea eb ce bm l ec ed a b ee">Jwt</a></li><li class="cd dx dy dz"><a href="/tag/single-page-applications" class="ea eb ce bm l ec ed a b ee">Single Page Applications</a></li></ul></div><div class="ef v eg u"><div class="v ai"><div class="eh l cz"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40fishpercolator%2Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16&amp;source=post_actions_footer-----cf7dd9da9d16---------------------clap_footer-" class="ar as at au av aw ax ay az ba bb bc bd be bf bg" rel="noopener"><div class="c ei ej v ai ek cz el em en eo ep eq er es et eu ev ew ex ey"><div class="ay da db dc dd de ez dg ai fa ej v w fb o fc fd n ag dh di dj fe"><svg width="33" height="33" viewBox="0 0 33 33"><path d="M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z" fill-rule="evenodd"></path></svg></div></div></a></div><div class="dk l"><div class="dl"><h4 class="bh dm dn bj ff"><button class="ar as at au av aw ax ay az ba bb bc bd be bf bg">1.1K claps</button></h4></div></div></div><div class="v ai"><div class="fg l aq g"><a href="//medium.com/p/cf7dd9da9d16/share/twitter?source=follow_footer--------------------------follow_footer-" class="ar as at au av aw ax ay az ba bb bc bd be bf bg" target="_blank" rel="noopener"><svg width="29" height="29" class="an"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div class="fg l aq g"><a href="//medium.com/p/cf7dd9da9d16/share/facebook?source=follow_footer--------------------------follow_footer-" class="ar as at au av aw ax ay az ba bb bc bd be bf bg" target="_blank" rel="noopener"><svg width="29" height="29" class="an"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div class="fg am ap"><div class="cd"><button class="ar as at au av aw ax ay az ba bb bc bd be bf bg"><svg width="25" height="25" class="an"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></button></div></div><div class="fg l aq"><div><div class="cd"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40fishpercolator%2Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16&amp;source=post_actions_footer--------------------------bookmark_sidebar-" class="ar as at au av aw ax ay az ba bb bc bd be bf bg" rel="noopener"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div><div class="cd"><div class="l aq"><button class="ar as at au av aw ax ay az ba bb bc bd be bf bg"><svg width="25" height="25" viewBox="-480.5 272.5 21 21" class="an"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"></path></svg></button></div></div></div></div><div class="fh fi fj dw l u"><div class="fk fl l cz"><span class="l fm ak fn"><div class="l fd fo fp"><a rel="noopener" href="/@fishpercolator?source=follow_footer--------------------------follow_footer-"><img alt="Quinn Daley" class="l ej fq fr" src="https://miro.medium.com/fit/c/160/160/2*S7RXW9SAoHSOBu8dWz7TXA.jpeg" width="80" height="80"/></a></div><span class="l"><div class="fs l ft"><p class="bh dm ee bj bm fu fv">Written by</p></div><div class="fs fw v ft"><div class="ag v ai eg"><h2 class="bh fx fy fz ff"><a class="ar as at au av aw ax ay az ba bb bc bd be bf bg" rel="noopener" href="/@fishpercolator?source=follow_footer--------------------------follow_footer-">Quinn Daley</a></h2><div class="l g"><button class="ga ff an bw gb gc gd ge ba bf gf gg gh gi gj gk bz bh b bi bj bk bl ca cb cc cd ce bd">Follow</button></div></div></div></span></span><div class="fs gl l ft ap"><div class="gm l"><h4 class="bh dm gn go bm">Quinn is the main developer at Fish Percolator: changing the world in small ways through technology. https://www.fishpercolator.co.uk/</h4></div><div class="am gp ap"><button class="ga ff an bw gb gc gd ge ba bf gf gg gh gi gj gk bz bh b bi bj bk bl ca cb cc cd ce bd">Follow</button></div></div></div></div><div class="gq fi l u"><a href="https://medium.com/p/cf7dd9da9d16/responses/show?source=follow_footer--------------------------follow_footer-" class="ar as at au av aw ax ay az ba bb bc bd be bf bg" rel="noopener"><span class="gr gs dd"><div class="gt gu bz l gv ap"><span class="bp">See responses (14)</span></div></span></a></div></div></div><div class="gw l gx u"><div class="v w"><div class="x y z ab ac ae af ag"></div></div></div></div></div><div class="gy l gz ha"><section class="cj ck ag cc l hb hc hd he hf hg hh hi hj hk hl hm hn ho hp"><div class="hq hr fk v eg g"><div class="hs v eg"><div class="ht l hu"><div class="hv l"><a href="https://medium.com/about?autoplay=1&amp;source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba hw hx bd be hy hz" rel="noopener"><h4 class="ia ib ic bh fx bi go id ie l">Discover <!-- -->Medium</h4></a></div><span class="bh b bi bj bk bl l if ig">Welcome to a place where words matter. On <!-- -->Medium<!-- -->, smart voices and original ideas take center stage - with no ads in sight.<!-- --> <a href="https://medium.com/about?autoplay=1&amp;source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba bd be hy hz ih" rel="noopener">Watch</a></span></div><div class="ht l hu"><div class="ii l"><a href="https://medium.com/topics?source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba hw hx bd be hy hz" rel="noopener"><h4 class="ia ib ic bh fx bi go id ie l">Make <!-- -->Medium<!-- --> yours</h4></a></div><span class="bh b bi bj bk bl l if ig">Follow all the topics you care about, and we’ll deliver the best stories for you to your homepage and inbox.<!-- --> <a href="https://medium.com/topics?source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba bd be hy hz ih" rel="noopener">Explore</a></span></div><div class="ht l hu"><div class="hv l"><a href="https://medium.com/membership?source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba hw hx bd be hy hz" rel="noopener"><h4 class="ia ib ic bh fx bi go id ie l">Become a member</h4></a></div><span class="bh b bi bj bk bl l if ig">Get unlimited access to the best stories on <!-- -->Medium<!-- --> — and support writers while you’re at it. Just $5/month.<!-- --> <a href="https://medium.com/membership?source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba bd be hy hz ih" rel="noopener">Upgrade</a></span></div></div></div><div class="v ai eg"><a href="https://medium.com/?source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba hw hx bd be hy hz" rel="noopener"><svg height="22" width="112" viewBox="0 0 111.5 22" class="ib"><path d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z"></path></svg></a><span class="bh b bi bj bk bl l if ig"><div class="ij ik v eg il ak"><a href="https://medium.com/about?autoplay=1&amp;source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba im bd be hy hz" rel="noopener">About</a><a href="https://help.medium.com/?source=post_page-----cf7dd9da9d16----------------------" class="ar as at au av aw ax ay az ba im bd be hy hz" rel="noopener">Help</a><a class="ar as at au av aw ax ay az ba im bd be hy hz" rel="noopener" href="/policy/9db0094a1e0f?source=post_page-----cf7dd9da9d16----------------------">Legal</a></div></span></div></section></div></div></div><script src="https://cdn.optimizely.com/js/16180790160.js"></script><script>window.__BUILD_ID__ = "development"</script><script>window.__GRAPHQL_URI__ = "https://medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"config":{"nodeEnv":"production","version":"master-20191018-190947-eed3e6c6cc","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","lightStep":{"name":"lite-web","host":"collector-medium.lightstep.com","token":"ce5be895bef60919541332990ac9fef2","appVersion":"master-20191018-190947-eed3e6c6cc"},"algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","sentry":{"dsn":"https:\u002F\u002F589e367c28ca47b195ce200d1507d18b@sentry.io\u002F1423575","environment":"production"},"isAmp":false,"googleAnalyticsCode":"UA-24232453-2","signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumOwnedAndOperatedCollectionIds":["544c7006046e","bcc38c8f6edf","444d13b52878","8d6b8a439e32","92d2092dc598","1285ba81cada","cb8577c9149e","8ccfed20cbb2","ae2a65f35510","3f6ecf56618","7b6769f2748b"]},"debug":{"requestId":"68c50762-495a-47a8-9748-6446b7366bdd","originalSpanCarrier":{"ot-tracer-spanid":"1f00bb214581bde3","ot-tracer-traceid":"2195111d608b6cf0","ot-tracer-sampled":"true"}},"session":{"user":{"id":"lo_fxVzu7P9DRwA"},"xsrf":""},"stats":{"itemCount":0,"sending":false,"timeout":null,"backup":{}},"navigation":{"showBranchBanner":null,"hasRenderedBranchBanner":null,"hideGoogleOneTap":false,"branchData":{"loaded":false},"currentLocation":"https:\u002F\u002Fmedium.com\u002F@fishpercolator\u002Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16","host":"medium.com","hostname":"medium.com","currentHash":""},"client":{"isBot":false,"isEu":false,"isNativeMedium":false,"isCustomDomain":false},"multiVote":{"clapsPerPost":{}},"metadata":{"faviconImageId":null}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"viewer":null,"variantFlags":[{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.0","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.1","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.2","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.3","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.4","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.5","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.6","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.7","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.8","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.9","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.10","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.11","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.12","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.13","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.14","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.15","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.16","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.17","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.18","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.19","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.20","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.21","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.22","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.23","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.24","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.25","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.26","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.27","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.28","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.29","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.30","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.31","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.32","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.33","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.34","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.35","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.36","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.37","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.38","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.39","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.40","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.41","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.42","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.43","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.44","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.45","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.46","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.47","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.48","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.49","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.50","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.51","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.52","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.53","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.54","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.55","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.56","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.57","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.58","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.59","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.60","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.61","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.62","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.63","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.64","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.65","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.66","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.67","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.68","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.69","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.70","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.71","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.72","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.73","typename":"VariantFlag"}],"meterPost({\"postId\":\"cf7dd9da9d16\",\"postMeteringOptions\":{}})":{"type":"id","generated":false,"id":"MeteringInfo:singleton","typename":"MeteringInfo"},"postResult({\"id\":\"cf7dd9da9d16\"})":{"type":"id","generated":false,"id":"Post:cf7dd9da9d16","typename":"Post"}},"ROOT_QUERY.variantFlags.0":{"name":"allow_access","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.0.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.0.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.1":{"name":"allow_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.1.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.1.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.2":{"name":"allow_test_auth","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.2.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.2.valueType":{"__typename":"VariantFlagString","value":"disallow"},"ROOT_QUERY.variantFlags.3":{"name":"available_annual_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.3.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.3.valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"},"ROOT_QUERY.variantFlags.4":{"name":"available_monthly_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.4.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.4.valueType":{"__typename":"VariantFlagString","value":"60e220181034"},"ROOT_QUERY.variantFlags.5":{"name":"block_bad_domain_logins","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.5.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.5.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.6":{"name":"browsable_stream_config_bucket","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.6.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.6.valueType":{"__typename":"VariantFlagString","value":"curated-topics"},"ROOT_QUERY.variantFlags.7":{"name":"disable_gosocial_followers_that_you_follow","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.7.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.7.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.8":{"name":"disable_ios_resume_reading_toast","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.8.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.8.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.9":{"name":"disable_mobile_featured_chunk","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.9.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.9.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.10":{"name":"enable_annual_renewal_reminder_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.10.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.10.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.11":{"name":"enable_app_flirty_thirty","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.11.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.11.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.12":{"name":"enable_automated_mission_control_triggers","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.12.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.12.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.13":{"name":"enable_branch_io","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.13.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.13.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.14":{"name":"enable_branding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.14.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.14.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.15":{"name":"enable_branding_fonts","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.15.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.15.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.16":{"name":"enable_dedicated_series_tab_api_ios","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.16.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.16.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.17":{"name":"enable_disregard_trunc_state_for_footer","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.17.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.17.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.18":{"name":"enable_edit_alt_text","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.18.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.18.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.19":{"name":"enable_email_sign_in_captcha","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.19.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.19.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.20":{"name":"enable_embedding_based_diversification","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.20.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.20.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.21":{"name":"enable_feature_store_from_ranker","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.21.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.21.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.22":{"name":"enable_google_one_tap","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.22.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.22.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.23":{"name":"enable_icymi_section_in_digest_with_three_stories","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.23.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.23.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.24":{"name":"enable_inline_search_lite","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.24.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.24.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.25":{"name":"enable_inline_search_popover_lite","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.25.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.25.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.26":{"name":"enable_ios_post_stats","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.26.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.26.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.27":{"name":"enable_janky_spam_rules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.27.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.27.valueType":{"__typename":"VariantFlagString","value":"users,posts"},"ROOT_QUERY.variantFlags.28":{"name":"enable_kafka_events","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.28.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.28.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.29":{"name":"enable_limit_diversification_heuristic","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.29.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.29.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.30":{"name":"enable_lite_notifications","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.30.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.30.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.31":{"name":"enable_lite_post","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.31.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.31.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.32":{"name":"enable_lite_post_cd","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.32.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.32.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.33":{"name":"enable_lite_post_highlights","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.33.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.33.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.34":{"name":"enable_lite_post_highlights_view_only","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.34.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.34.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.35":{"name":"enable_lite_profile","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.35.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.35.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.36":{"name":"enable_lite_pub_header_menu","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.36.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.36.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.37":{"name":"enable_lite_read_next","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.37.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.37.valueType":{"__typename":"VariantFlagString","value":"sidebar"},"ROOT_QUERY.variantFlags.38":{"name":"enable_lite_stories","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.38.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.38.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.39":{"name":"enable_lite_topics","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.39.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.39.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.40":{"name":"enable_lite_twitter_text_shots","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.40.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.40.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.41":{"name":"enable_lite_unread_notification_count_mutation","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.41.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.41.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.42":{"name":"enable_live_user_post_scoring","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.42.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.42.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.43":{"name":"enable_logged_out_homepage_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.43.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.43.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.44":{"name":"enable_marketing_emails","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.44.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.44.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.45":{"name":"enable_media_resource_try_catch","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.45.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.45.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.46":{"name":"enable_more_branch_data","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.46.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.46.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.47":{"name":"enable_new_collaborative_filtering_data","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.47.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.47.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.48":{"name":"enable_new_paypal_billing_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.48.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.48.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.49":{"name":"enable_optimizely","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.49.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.49.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.50":{"name":"enable_parsely","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.50.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.50.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.51":{"name":"enable_patronus_on_kubernetes","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.51.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.51.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.52":{"name":"enable_popular_provider","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.52.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.52.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.53":{"name":"enable_post_import","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.53.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.53.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.54":{"name":"enable_primary_topic_for_mobile","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.54.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.54.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.55":{"name":"enable_quarantine_rules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.55.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.55.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.56":{"name":"enable_rank_service_newsletters","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.56.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.56.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.57":{"name":"enable_save_to_medium","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.57.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.57.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.58":{"name":"enable_tick_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.58.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.58.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.59":{"name":"enable_tipalti_onboarding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.59.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.59.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.60":{"name":"enable_topic_lifecycle_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.60.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.60.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.61":{"name":"enable_trumpland_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.61.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.61.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.62":{"name":"glyph_font_set","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.62.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.62.valueType":{"__typename":"VariantFlagString","value":"m2"},"ROOT_QUERY.variantFlags.63":{"name":"google_sign_in_android","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.63.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.63.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.64":{"name":"is_not_medium_subscriber","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.64.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.64.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.65":{"name":"new_transition_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.65.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.65.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.66":{"name":"pub_sidebar","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.66.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.66.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.67":{"name":"rank_model","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.67.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.67.valueType":{"__typename":"VariantFlagString","value":"default"},"ROOT_QUERY.variantFlags.68":{"name":"redis_read_write_splitting","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.68.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.68.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.69":{"name":"restrict_publishing_from_high_risk_new_accounts","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.69.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.69.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.70":{"name":"signin_services","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.70.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.70.valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap"},"ROOT_QUERY.variantFlags.71":{"name":"signup_services","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.71.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.71.valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap"},"ROOT_QUERY.variantFlags.72":{"name":"use_letters_ip_for_pub_digest","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.72.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.72.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.73":{"name":"use_new_admin_topic_backend","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.73.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.73.valueType":{"__typename":"VariantFlagBoolean","value":true},"MeteringInfo:singleton":{"__typename":"MeteringInfo","postIds":{"type":"json","json":[]},"maxUnlockCount":3,"unlocksRemaining":3},"Post:cf7dd9da9d16":{"__typename":"Post","visibility":"PUBLIC","latestPublishedVersion":"a0caa2ca6b2c","collection":null,"id":"cf7dd9da9d16","creator":{"type":"id","generated":false,"id":"User:2e8b8106e3ba","typename":"User"},"isLocked":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","sequence":null,"mediumUrl":"https:\u002F\u002Fmedium.com\u002F@fishpercolator\u002Fhow-to-separate-frontend-backend-with-rails-api-nuxt-js-and-devise-jwt-cf7dd9da9d16","canonicalUrl":"","content({\"postMeteringOptions\":{}})":{"type":"id","generated":true,"id":"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}})","typename":"PostContent"},"firstPublishedAt":1520533019078,"isPublished":true,"layerCake":0,"primaryTopic":null,"title":"How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT","isLimitedState":false,"pendingCollection":null,"shareKey":null,"statusForCollection":null,"readingTime":9.359748427672956,"license":"ALL_RIGHTS_RESERVED","allowResponses":true,"tags":[{"type":"id","generated":false,"id":"Tag:ruby-on-rails","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:nuxtjs","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:vuejs","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:jwt","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:single-page-applications","typename":"Tag"}],"viewerClapCount":0,"readingList":"READING_LIST_NONE","clapCount":1114,"voterCount":156,"recommenders":[],"responsesCount":14,"collaborators":[],"translationSourcePost":null,"newsletterId":"","inResponseToPostResult":null,"inResponseToMediaResource":null,"curationEligibleAt":0,"audioVersionUrl":"","socialTitle":"","socialDek":"","metaDescription":"","latestPublishedAt":1524422139400,"previewContent":{"type":"id","generated":true,"id":"$Post:cf7dd9da9d16.previewContent","typename":"PreviewContent"},"previewImage":{"type":"id","generated":false,"id":"ImageMetadata:1*jHIfNy7ixrRKApsPeqw5Xw.png","typename":"ImageMetadata"},"updatedAt":1529354002261,"topics":[],"isSuspended":false},"User:2e8b8106e3ba":{"id":"2e8b8106e3ba","__typename":"User","isSuspended":false,"allowNotes":true,"name":"Quinn Daley","isFollowing":false,"username":"fishpercolator","bio":"Quinn is the main developer at Fish Percolator: changing the world in small ways through technology. https:\u002F\u002Fwww.fishpercolator.co.uk\u002F","imageId":"2*S7RXW9SAoHSOBu8dWz7TXA.jpeg","mediumMemberAt":0,"isBlocking":false,"isPartnerProgramEnrolled":false,"twitterScreenName":"fishpercolator"},"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}})":{"isLockedPreviewOnly":false,"validatedShareKey":"","__typename":"PostContent","bodyModel":{"type":"id","generated":true,"id":"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel","typename":"RichText"}},"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel.sections.0":{"name":"bbbd","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel.sections.1":{"name":"6c91","startIndex":10,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel.sections.2":{"name":"708d","startIndex":35,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel.sections.3":{"name":"e8bb","startIndex":64,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel":{"sections":[{"type":"id","generated":true,"id":"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel.sections.0","typename":"Section"},{"type":"id","generated":true,"id":"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel.sections.1","typename":"Section"},{"type":"id","generated":true,"id":"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel.sections.2","typename":"Section"},{"type":"id","generated":true,"id":"$Post:cf7dd9da9d16.content({\"postMeteringOptions\":{}}).bodyModel.sections.3","typename":"Section"}],"paragraphs":[{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_0","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_1","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_2","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_3","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_4","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_5","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_6","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_7","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_8","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_9","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_10","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_11","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_12","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_13","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_14","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_15","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_16","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_17","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_18","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_19","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_20","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_21","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_22","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_23","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_24","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_25","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_26","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_27","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_28","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_29","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_30","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_31","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_32","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_33","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_34","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_35","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_36","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_37","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_38","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_39","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_40","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_41","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_42","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_43","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_44","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_45","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_46","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_47","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_48","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_49","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_50","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_51","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_52","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_53","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_54","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_55","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_56","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_57","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_58","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_59","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_60","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_61","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_62","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_63","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_64","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_65","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_66","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_67","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_68","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_69","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_70","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_71","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_72","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_73","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_74","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_75","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_76","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_77","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_78","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_79","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_80","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_81","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_82","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_83","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_84","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_85","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_86","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_87","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_88","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_89","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_90","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_91","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_92","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_93","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_94","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_95","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_96","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_97","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_98","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_99","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_100","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_101","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_102","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_103","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_104","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_105","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_106","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_107","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_108","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_109","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:a0caa2ca6b2c_110","typename":"Paragraph"}],"__typename":"RichText"},"Paragraph:a0caa2ca6b2c_0":{"id":"a0caa2ca6b2c_0","name":"8c89","__typename":"Paragraph","type":"H3","href":null,"layout":null,"metadata":null,"text":"How to separate frontend + backend with Rails API, Nuxt.js and Devise-JWT","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_1":{"id":"a0caa2ca6b2c_1","name":"33f0","__typename":"Paragraph","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*jHIfNy7ixrRKApsPeqw5Xw.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*jHIfNy7ixrRKApsPeqw5Xw.png":{"id":"1*jHIfNy7ixrRKApsPeqw5Xw.png","originalHeight":500,"originalWidth":1400,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:a0caa2ca6b2c_2":{"id":"a0caa2ca6b2c_2","name":"3771","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"I’ve been a huge fan of Ruby on Rails since the early days, and although the web world has moved on a lot since then, Rails still has a place in this landscape, for rapid app development with clean, maintainable code.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_2.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_2.markups.0":{"type":"A","start":24,"end":37,"href":"http:\u002F\u002Frubyonrails.org\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_3":{"id":"a0caa2ca6b2c_3","name":"9733","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"But the web world has changed. The rise of Progressive Web Apps (and mobile apps before them) has led to a world where users want a strong interactive interface from their web apps: clicking on links and downloading the next page of UI from the server feels like something people did in the 2000s.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_3.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_3.markups.0":{"type":"A","start":43,"end":63,"href":"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Fprogressive-web-apps\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_4":{"id":"a0caa2ca6b2c_4","name":"0012","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"I’ve recently become a big fan of Nuxt.js, which I have started to think of as “the Rails of frontend”. Nuxt is an app development framework based around Webpack and Vue.js. It does have a backend but, in my experience, it really shines when it is used in generate mode to build serverless applications that can be deployed on services that normally do static content, like GitHub Pages or S3. Examples of serverless applications I’ve built using Nuxt include Maple and my business website, both running on GitHub Pages.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_4.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_4.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_4.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_4.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_4.markups.4","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_4.markups.0":{"type":"A","start":34,"end":41,"href":"https:\u002F\u002Fnuxtjs.org\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_4.markups.1":{"type":"A","start":166,"end":172,"href":"https:\u002F\u002Fvuejs.org\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_4.markups.2":{"type":"A","start":460,"end":465,"href":"https:\u002F\u002Fwww.fishpercolator.co.uk\u002Fmaple\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_4.markups.3":{"type":"A","start":470,"end":489,"href":"https:\u002F\u002Fwww.fishpercolator.co.uk\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_4.markups.4":{"type":"EM","start":256,"end":264,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_5":{"id":"a0caa2ca6b2c_5","name":"c691","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"A lot of buzz in the Rails world right now is around Rails API: a stripped down version of Rails that can be used to build API-only server apps that then hook up to whatever frontends you like: mobile apps or browser-based apps such as those built with Nuxt.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_5.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_5.markups.0":{"type":"A","start":53,"end":62,"href":"http:\u002F\u002Fguides.rubyonrails.org\u002Fapi_app.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_6":{"id":"a0caa2ca6b2c_6","name":"1af7","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"But there seems to be a dearth of guides about how you would actually do this, especially when considering authentication. How can you provide a login interface in the frontend that logs your users into the backend?","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_6.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_6.markups.0":{"type":"EM","start":107,"end":121,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_7":{"id":"a0caa2ca6b2c_7","name":"8f26","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"So here goes. A somewhat lengthy blog post that goes through, step-by-step, the process of building a simple decoupled web application in Rails API and Nuxt, and building an incredibly basic authentication system using Devise-JWT.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_7.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_7.markups.0":{"type":"A","start":219,"end":229,"href":"https:\u002F\u002Fgithub.com\u002Fwaiting-for-dev\u002Fdevise-jwt","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_8":{"id":"a0caa2ca6b2c_8","name":"b3ce","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Note: This guide assumes a reasonably good knowledge of Rails, a passing knowledge of Vue.js and at least a basic grasp of Docker.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_9":{"id":"a0caa2ca6b2c_9","name":"3e0e","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"If you want to see the finished application, or you get stuck at any point, you can refer to the source code on GitHub.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_9.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_9.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_9.markups.0":{"type":"A","start":76,"end":118,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_9.markups.1":{"type":"STRONG","start":0,"end":119,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_10":{"id":"a0caa2ca6b2c_10","name":"ba59","__typename":"Paragraph","type":"H3","href":null,"layout":null,"metadata":null,"text":"Part 1: Creating a development environment","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_11":{"id":"a0caa2ca6b2c_11","name":"a288","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Before we start coding, we’ll need a development environment. I like to use Docker for this, because it keeps everything separated. Chances are in production your database, backend and frontend will all be running in different places so let’s start as we mean to go on in order to avoid accidental coupling.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_12":{"id":"a0caa2ca6b2c_12","name":"c3db","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"First, let’s create blank Rails API and Nuxt applications:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_13":{"id":"a0caa2ca6b2c_13","name":"7f22","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_13.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:755b92bbbbac7c2681655bc011d70844":{"id":"755b92bbbbac7c2681655bc011d70844","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"create.sh","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_13.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:755b92bbbbac7c2681655bc011d70844","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_14":{"id":"a0caa2ca6b2c_14","name":"e569","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"This assumes you have the ‘rails’ and ‘vue’ CLIs installed on your host machine. You can of course use the Docker images for these CLIs if you don’t.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_15":{"id":"a0caa2ca6b2c_15","name":"29bf","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"The various options to rails new cause it to skip adding tests, Action Cable and Spring, and also to stop it from running bundle on your host machine (we’ll want to run this inside Docker). Similarly, we use yarn generate-lock-entry to generate the yarn.lock file without having to install the packages.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_15.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_15.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_15.markups.2","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_15.markups.0":{"type":"EM","start":23,"end":32,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_15.markups.1":{"type":"EM","start":122,"end":128,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_15.markups.2":{"type":"EM","start":208,"end":232,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_16":{"id":"a0caa2ca6b2c_16","name":"f193","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Next, create small Dockerfiles to build the frontend and backend environments, and a docker-compose.yml to describe how they and the database fit together:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_17":{"id":"a0caa2ca6b2c_17","name":"b66a","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_17.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:1c3dd10aff8fa7145fe56b0666f7460e":{"id":"1c3dd10aff8fa7145fe56b0666f7460e","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"autheg-backend Dockerfile","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_17.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:1c3dd10aff8fa7145fe56b0666f7460e","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_18":{"id":"a0caa2ca6b2c_18","name":"5258","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Some things to note here:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_19":{"id":"a0caa2ca6b2c_19","name":"b090","__typename":"Paragraph","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Gems and yarn packages are installed into the mounted volumes. This will stop you from needing to rebuild the whole Docker image every time you change the Gemfile or package.json.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_20":{"id":"a0caa2ca6b2c_20","name":"63ad","__typename":"Paragraph","type":"ULI","href":null,"layout":null,"metadata":null,"text":"This assumes your host user ID is 1001 and creates a user inside each container with the same user ID. If your user ID is different, you can set the UID environment variable before building and it will pass that as an arg to the build.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_21":{"id":"a0caa2ca6b2c_21","name":"c917","__typename":"Paragraph","type":"ULI","href":null,"layout":null,"metadata":null,"text":"You’ll probably want to add node_modules to the frontend .dockerignore & .gitignore and vendor\u002Fbundle, log, tmp, to the backend ones. That way they won’t be copied during build time.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_22":{"id":"a0caa2ca6b2c_22","name":"8bdb","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Now it’s time to build everything:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_23":{"id":"a0caa2ca6b2c_23","name":"8f5c","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_23.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:16a0cd5158340e2a4cad1e11f5968ba5":{"id":"16a0cd5158340e2a4cad1e11f5968ba5","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"build.sh","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_23.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:16a0cd5158340e2a4cad1e11f5968ba5","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_24":{"id":"a0caa2ca6b2c_24","name":"2363","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"The reason you need to run bundle and yarn after building is because your docker-compose file mounts your host volumes into the containers so you need to install the packages into the host volumes as well as the images that are used to create the containers.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_24.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_24.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_24.markups.0":{"type":"EM","start":43,"end":48,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_24.markups.1":{"type":"EM","start":94,"end":100,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_25":{"id":"a0caa2ca6b2c_25","name":"12bd","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"A couple of last things before you can bring this environment up:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_26":{"id":"a0caa2ca6b2c_26","name":"4e46","__typename":"Paragraph","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Edit database.yml to set the hostname to ‘db’ and the user to ‘postgres’.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_26.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_26.markups.0":{"type":"A","start":5,"end":17,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-backend\u002Fconfig\u002Fdatabase.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_27":{"id":"a0caa2ca6b2c_27","name":"af05","__typename":"Paragraph","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Edit package.json to change the ‘dev’ script to ‘HOST=0.0.0.0 nuxt’ (so it’s visible on your host machine).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_27.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_27.markups.0":{"type":"A","start":5,"end":17,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-frontend\u002Fpackage.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_28":{"id":"a0caa2ca6b2c_28","name":"ef12","__typename":"Paragraph","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Run ‘docker-compose run backend rails db:create’ to create the development database.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_29":{"id":"a0caa2ca6b2c_29","name":"f694","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"All being well, you should now be able to type:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_30":{"id":"a0caa2ca6b2c_30","name":"3aff","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"docker-compose up","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_31":{"id":"a0caa2ca6b2c_31","name":"0303","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"And your environment (database, backend and frontend) will spin up. You can check the web interfaces on :8080 and :3000 and you should see the default pages for each.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_32":{"id":"a0caa2ca6b2c_32","name":"acd4","__typename":"Paragraph","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*hoai7Zion_e9-0uZQGr1Sw.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*hoai7Zion_e9-0uZQGr1Sw.png":{"id":"1*hoai7Zion_e9-0uZQGr1Sw.png","originalHeight":1029,"originalWidth":1664,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:a0caa2ca6b2c_33":{"id":"a0caa2ca6b2c_33","name":"7f47","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"The frontend one is actually a webpack-dev-server, which you might not be used to if you’re an old-school Rails coder. Changes you make to the UI will be reflected immediately in your browser, without needing to reload. This is an exciting change!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_33.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_33.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_33.markups.0":{"type":"A","start":31,"end":49,"href":"https:\u002F\u002Fgithub.com\u002Fwebpack\u002Fwebpack-dev-server","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_33.markups.1":{"type":"EM","start":164,"end":175,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_34":{"id":"a0caa2ca6b2c_34","name":"c867","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Right! Get your project committed to version control and then let’s start building some stuff!","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_35":{"id":"a0caa2ca6b2c_35","name":"aa2e","__typename":"Paragraph","type":"H3","href":null,"layout":null,"metadata":null,"text":"Part 2: Getting them talking to each other","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_36":{"id":"a0caa2ca6b2c_36","name":"428b","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s build our first API method. We’re just going to create a resource called “example” that has a name and a colour, and create 3 of these for testing.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_37":{"id":"a0caa2ca6b2c_37","name":"a7c7","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"(From now on, \u003E means “run from a backend bash”.)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_37.markups.0","typename":"Markup"}],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_37.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_37.markups.0":{"type":"STRONG","start":14,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:7345cee61a2b4b6354a09fa79232afed":{"id":"7345cee61a2b4b6354a09fa79232afed","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"create-resource.sh","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_37.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:7345cee61a2b4b6354a09fa79232afed","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_38":{"id":"a0caa2ca6b2c_38","name":"c27a","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Edit routes.rb to move the new route into an api scope, and add a simple index method to the ExamplesController:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_39":{"id":"a0caa2ca6b2c_39","name":"0e94","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_39.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:a8b5acc5d7e7df337cce7154b4db0afc":{"id":"a8b5acc5d7e7df337cce7154b4db0afc","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"examples_controller.rb","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_39.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:a8b5acc5d7e7df337cce7154b4db0afc","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_40":{"id":"a0caa2ca6b2c_40","name":"a58b","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Make sure your ApplicationController tells all its children they can respond to requests for JSON (this is necessary for some gems, like Devise):","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_41":{"id":"a0caa2ca6b2c_41","name":"6755","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_41.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:497827479ac09b33afa586d924df5b5f":{"id":"497827479ac09b33afa586d924df5b5f","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"application_controller.rb","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_41.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:497827479ac09b33afa586d924df5b5f","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_42":{"id":"a0caa2ca6b2c_42","name":"82ae","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"[Edit: You might actually need to wait until Devise is installed to do this, because it looks like there’s a dependency issue if you do it this early. Let me know if you have any ideas about how to introduce these this early.]","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_42.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_42.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_42.markups.0":{"type":"STRONG","start":0,"end":226,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_42.markups.1":{"type":"EM","start":0,"end":226,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_43":{"id":"a0caa2ca6b2c_43","name":"d4a7","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Now immediately you should be able to visit http:\u002F\u002Flocalhost:8080\u002Fapi\u002Fexamples to see your API in action:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_43.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_43.markups.0":{"type":"A","start":44,"end":78,"href":"http:\u002F\u002Flocalhost:8080\u002Fapi\u002Fexamples","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_44":{"id":"a0caa2ca6b2c_44","name":"39ac","__typename":"Paragraph","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*76hf6XcYJM_xLdpbd0jZGw.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*76hf6XcYJM_xLdpbd0jZGw.png":{"id":"1*76hf6XcYJM_xLdpbd0jZGw.png","originalHeight":781,"originalWidth":960,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:a0caa2ca6b2c_45":{"id":"a0caa2ca6b2c_45","name":"92fc","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Now for the fun part: we’ll hook the frontend up to the backend. But first, don’t forget to commit to version control!","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_46":{"id":"a0caa2ca6b2c_46","name":"2144","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"We’re going to use axios to talk to the API, and vuetify as a UI kit. (You can use HTML and CSS in Vue, but there are also deeper UI integrations: vuetify is a UI kit based on Material Design.) Both of these have integrations with Nuxt available in the community, so let’s install those:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_46.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_46.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_46.markups.0":{"type":"A","start":19,"end":24,"href":"https:\u002F\u002Fgithub.com\u002Faxios\u002Faxios","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_46.markups.1":{"type":"A","start":49,"end":56,"href":"https:\u002F\u002Fvuetifyjs.com\u002Fen\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_47":{"id":"a0caa2ca6b2c_47","name":"8539","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"docker-compose run frontend yarn add @nuxtjs\u002Faxios @nuxtjs\u002Fvuetify","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_47.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_47.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_47.markups.0":{"type":"A","start":37,"end":50,"href":"http:\u002F\u002Ftwitter.com\u002Fnuxtjs\u002Faxios","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_47.markups.1":{"type":"A","start":51,"end":66,"href":"http:\u002F\u002Ftwitter.com\u002Fnuxtjs\u002Fvuetify","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_48":{"id":"a0caa2ca6b2c_48","name":"df44","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"and add to the Nuxt config file:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_49":{"id":"a0caa2ca6b2c_49","name":"dba9","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_49.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:823ac8d0a43f3b22f2009757251f4782":{"id":"823ac8d0a43f3b22f2009757251f4782","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"fragment of nuxt.config.js","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_49.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:823ac8d0a43f3b22f2009757251f4782","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_50":{"id":"a0caa2ca6b2c_50","name":"9187","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"(Obviously in production you’ll want to move the axios config to the environment, but for now it’s OK to hardcode it.)","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_51":{"id":"a0caa2ca6b2c_51","name":"2d5a","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Now let’s replace the layouts\u002Fdefault.vue and pages\u002Findex.vue that Nuxt has created for us:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_52":{"id":"a0caa2ca6b2c_52","name":"3118","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_52.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:77e8c373c5b74ba76d94c7d7341b9372":{"id":"77e8c373c5b74ba76d94c7d7341b9372","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"default.vue","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_52.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:77e8c373c5b74ba76d94c7d7341b9372","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_53":{"id":"a0caa2ca6b2c_53","name":"c019","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"The default.vue is a standard vuetify layout, with a toolbar containing a link to the homepage. The nuxt option to the link tells it to use Nuxt’s router to handle the link, rather than doing it in the browser.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_53.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_53.markups.0":{"type":"EM","start":100,"end":104,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_54":{"id":"a0caa2ca6b2c_54","name":"2e36","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"index.vue is a little more complex: the mounted() method is called when the template is initialized, and that in turn calls the updateExamples(), which uses the axios integration to set the examples variable to the results of the API method. The \u003Cv-list\u003E contains a reactive set of tiles that is automatically populated based on whatever is in examples (so it will be empty at first and then fill out when the API method completes).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_54.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_54.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_54.markups.0":{"type":"EM","start":40,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_54.markups.1":{"type":"EM","start":128,"end":144,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_55":{"id":"a0caa2ca6b2c_55","name":"f6ef","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"But if you try to visit this now you get an unfortunate error:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_56":{"id":"a0caa2ca6b2c_56","name":"9735","__typename":"Paragraph","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*5PhACGlQd7cfjiA-DqksuA.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*5PhACGlQd7cfjiA-DqksuA.png":{"id":"1*5PhACGlQd7cfjiA-DqksuA.png","originalHeight":781,"originalWidth":960,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:a0caa2ca6b2c_57":{"id":"a0caa2ca6b2c_57","name":"d768","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"JavaScript isn’t allowed to query endpoints on other domains unless those domains set the CORS headers appropriately. Luckily, Rails API has predicted we’ll want that!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_57.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_57.markups.0":{"type":"A","start":90,"end":94,"href":"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FCross-origin_resource_sharing","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_58":{"id":"a0caa2ca6b2c_58","name":"d139","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Uncomment the ‘rack-cors’ line in the Gemfile and uncomment the code in cors.rb, changing example.com to localhost:3000 (or *). Install the gem:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_58.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_58.markups.0":{"type":"A","start":72,"end":79,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-backend\u002Fconfig\u002Finitializers\u002Fcors.rb","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_59":{"id":"a0caa2ca6b2c_59","name":"edeb","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"docker-compose run -u root backend bundle","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_60":{"id":"a0caa2ca6b2c_60","name":"b43b","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"and restart your docker containers by hitting Ctrl-C on the running ones and doing docker-compose up again. Fingers crossed now you’ll see something like this:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_60.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_60.markups.0":{"type":"EM","start":83,"end":100,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_61":{"id":"a0caa2ca6b2c_61","name":"13a3","__typename":"Paragraph","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*LUreZEc1i0c5WfhoDCLxSQ.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*LUreZEc1i0c5WfhoDCLxSQ.png":{"id":"1*LUreZEc1i0c5WfhoDCLxSQ.png","originalHeight":781,"originalWidth":960,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:a0caa2ca6b2c_62":{"id":"a0caa2ca6b2c_62","name":"b3c9","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Woohoo! Your frontend app is displaying data directly from the backend! Try adding a new example to the database (e.g. ‘qux\u002Fcyan’) to confirm your frontend is really retrieving data from your backend.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_63":{"id":"a0caa2ca6b2c_63","name":"923d","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Commit to version control and get yourself a coffee. Next up is the authentication and it’s a little trickier!","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_64":{"id":"a0caa2ca6b2c_64","name":"5639","__typename":"Paragraph","type":"H3","href":null,"layout":null,"metadata":null,"text":"Part 3: Authentication with Devise-JWT","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_65":{"id":"a0caa2ca6b2c_65","name":"81f9","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Devise-JWT is an extension to the popular Rails authentication library Devise to add support for JSON Web Token, a popular implementation of single sign-on. If you Google around, you’ll find lots of people saying it’s easy to add JWT to Devise yourself, but not if you want to properly take advantage of all the features of Devise, and not if you want to log out (i.e. make a token invalid).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_65.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_65.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_65.markups.0":{"type":"A","start":0,"end":10,"href":"https:\u002F\u002Fgithub.com\u002Fwaiting-for-dev\u002Fdevise-jwt","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_65.markups.1":{"type":"A","start":97,"end":111,"href":"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FJSON_Web_Token","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_66":{"id":"a0caa2ca6b2c_66","name":"172a","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"First, add ‘devise’ and ‘devise-jwt’ to your Gemfile and run:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_67":{"id":"a0caa2ca6b2c_67","name":"02cb","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"docker-compose run -u root backend bundle","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_68":{"id":"a0caa2ca6b2c_68","name":"76f1","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Then you’re going to want to follow the instructions to install Devise. Since we’re using an API you don’t have to worry too much about the view layer stuff. I just did:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_68.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_68.markups.0":{"type":"A","start":56,"end":70,"href":"https:\u002F\u002Fgithub.com\u002Fplataformatec\u002Fdevise#getting-started","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_69":{"id":"a0caa2ca6b2c_69","name":"fe7b","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"\u003E rails g devise:install\n\u003E rails g devise user\n\u003E rails db:migrate","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_70":{"id":"a0caa2ca6b2c_70","name":"52e6","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Devise-JWT doesn’t have an installer, but it has good installation instructions. You need to decide how you want to invalidate tokens. I went for the blacklist option. For example:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_71":{"id":"a0caa2ca6b2c_71","name":"a4f1","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"\u003E rails g model jwt_blacklist jti:string:index exp:datetime","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_72":{"id":"a0caa2ca6b2c_72","name":"37c2","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Edit the migration to add null: false and remove the timestamps and add “include Devise::JWT::RevocationStrategies::Blacklist” to the model.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_72.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_72.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_72.markups.2","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_72.markups.0":{"type":"A","start":22,"end":63,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-backend\u002Fdb\u002Fmigrate\u002F20180302172533_create_jwt_blacklists.rb","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_72.markups.1":{"type":"A","start":130,"end":139,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-backend\u002Fapp\u002Fmodels\u002Fjwt_blacklist.rb#","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_72.markups.2":{"type":"EM","start":26,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_73":{"id":"a0caa2ca6b2c_73","name":"f2e3","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"To enable JWT, you’ll need to add jwt_secret to the secrets.yml file (you can create new secrets with “rails secret”), and add this to devise.rb:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_73.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_73.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_73.markups.0":{"type":"A","start":52,"end":63,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-backend\u002Fconfig\u002Fsecrets.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_73.markups.1":{"type":"A","start":135,"end":144,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-backend\u002Fconfig\u002Finitializers\u002Fdevise.rb","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_74":{"id":"a0caa2ca6b2c_74","name":"4876","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_74.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:558525451eec7c844c86a9bc811ed6ed":{"id":"558525451eec7c844c86a9bc811ed6ed","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"devise.rb","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_74.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:558525451eec7c844c86a9bc811ed6ed","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_75":{"id":"a0caa2ca6b2c_75","name":"5ebb","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"you need to update the devise line in your user model to add:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_75.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_75.markups.0":{"type":"A","start":38,"end":53,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-backend\u002Fapp\u002Fmodels\u002Fuser.rb","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_76":{"id":"a0caa2ca6b2c_76","name":"eba6","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":":jwt_authenticatable, jwt_revocation_strategy: JwtBlacklist","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_77":{"id":"a0caa2ca6b2c_77","name":"fad7","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Run “rails db:migrate” again to create your blacklist.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_78":{"id":"a0caa2ca6b2c_78","name":"d43c","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Move the devise_for route in routes.rb into your :api scope and restart your containers.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_79":{"id":"a0caa2ca6b2c_79","name":"4343","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"You should now be able to test your API using something like YARC. First, create yourself a user in the Rails console:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_79.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_79.markups.0":{"type":"A","start":61,"end":65,"href":"http:\u002F\u002Fyet-another-rest-client.com\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_80":{"id":"a0caa2ca6b2c_80","name":"4775","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"\u003E rails c\n\u003E\u003E User.create!(email: ‘test@example.com’, password: ‘password’)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_80.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_80.markups.0":{"type":"A","start":34,"end":50,"href":"mailto:test@example.com","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_81":{"id":"a0caa2ca6b2c_81","name":"7145","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Then try creating a POST message to your \u002Fapi\u002Fusers\u002Fsign_in endpoint that looks like this:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_82":{"id":"a0caa2ca6b2c_82","name":"38a9","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_82.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:2de46715e8c63cc3fab284f1d825bcbf":{"id":"2de46715e8c63cc3fab284f1d825bcbf","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"login.json","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_82.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:2de46715e8c63cc3fab284f1d825bcbf","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_83":{"id":"a0caa2ca6b2c_83","name":"fdd2","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"And you should see an Authorization header come back with the successful sign-in:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_84":{"id":"a0caa2ca6b2c_84","name":"7363","__typename":"Paragraph","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*2cTvgN1s2-6VkCLknzuwXQ.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*2cTvgN1s2-6VkCLknzuwXQ.png":{"id":"1*2cTvgN1s2-6VkCLknzuwXQ.png","originalHeight":986,"originalWidth":1230,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:a0caa2ca6b2c_85":{"id":"a0caa2ca6b2c_85","name":"e286","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Awesome. We’re getting there, I promise!","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_86":{"id":"a0caa2ca6b2c_86","name":"b6ae","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"We want to use Nuxt’s own auth library, which expects the JWT to be returned in the body of the sign in request, and also wants to make a separate API request to find out the user’s details such as their profile information. So let’s override Devise’s session controller.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_87":{"id":"a0caa2ca6b2c_87","name":"14e3","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Change the devise config in routes.rb to say you’ve overridden the controller, and add an additional ‘current’ endpoint:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_88":{"id":"a0caa2ca6b2c_88","name":"ff37","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_88.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:96b7d2981da812dca11d98a6a654df2c":{"id":"96b7d2981da812dca11d98a6a654df2c","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"routes.rb","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_88.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:96b7d2981da812dca11d98a6a654df2c","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_89":{"id":"a0caa2ca6b2c_89","name":"d0fd","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Then let’s add that controller file and two views. If you use jbuilder here you’ll need to uncomment jbuilder in the Gemfile, run “docker-compose run -u root backend bundle” and restart your containers again.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_90":{"id":"a0caa2ca6b2c_90","name":"fa79","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Add the views to app\u002Fviews\u002Fdevise\u002Fsessions","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_90.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:46834d2923c4425059d6de81748df7c2":{"id":"46834d2923c4425059d6de81748df7c2","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"create.json.jbuilder","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_90.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:46834d2923c4425059d6de81748df7c2","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_91":{"id":"a0caa2ca6b2c_91","name":"16f1","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Now try these methods out. Do the earlier POST and this time the token should come back in the response body as well as the headers.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_92":{"id":"a0caa2ca6b2c_92","name":"65e0","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Try doing a GET to the \u002Fapi\u002Fusers\u002Fcurrent endpoint with that “Authorization: Bearer $token” header and see if you can get back the user’s ID and email.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_93":{"id":"a0caa2ca6b2c_93","name":"0608","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Woop! One last thing: let’s make the ExamplesController require authentication. Add to that controller:","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_94":{"id":"a0caa2ca6b2c_94","name":"dafa","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"before_action :authenticate_user!","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_95":{"id":"a0caa2ca6b2c_95","name":"d664","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"If you go back to your frontend app, you should now see it’s failing because of a 401 Unauthorized error. Time to add authentication to the frontend!","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_96":{"id":"a0caa2ca6b2c_96","name":"ea6a","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Install the Nuxt auth library:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_96.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_96.markups.0":{"type":"A","start":12,"end":29,"href":"https:\u002F\u002Fgithub.com\u002Fnuxt-community\u002Fauth-module","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_97":{"id":"a0caa2ca6b2c_97","name":"9df7","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"The index.js goes in store\u002F to enable the Vuex store","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_97.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:d2bab206ca853eac8e3583c1901d2271":{"id":"d2bab206ca853eac8e3583c1901d2271","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"fragment of nuxt.config.js","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_97.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:d2bab206ca853eac8e3583c1901d2271","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_98":{"id":"a0caa2ca6b2c_98","name":"f76c","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Restart your containers before continuing to enable this new config.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_99":{"id":"a0caa2ca6b2c_99","name":"51a6","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s create a user page login.vue with login\u002Flogout controls based on the user’s current status:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_99.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_99.markups.0":{"type":"EM","start":25,"end":34,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_100":{"id":"a0caa2ca6b2c_100","name":"5f53","__typename":"Paragraph","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":{"type":"id","generated":true,"id":"$Paragraph:a0caa2ca6b2c_100.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:8a90659f85ee7045e2c9cfb0b8a4940e":{"id":"8a90659f85ee7045e2c9cfb0b8a4940e","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"login.vue","__typename":"MediaResource"},"$Paragraph:a0caa2ca6b2c_100.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:8a90659f85ee7045e2c9cfb0b8a4940e","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:a0caa2ca6b2c_101":{"id":"a0caa2ca6b2c_101","name":"62fb","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"There’s quite a lot going on here but it should be reasonably easy to work out. The login() method calls the equivalent method in the auth library, passing the appropriate JSON object that Devise is expecting. If there’s an error, it sets error, which is being watched for by the \u003Cv-alert\u003E.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_101.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_101.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_101.markups.0":{"type":"EM","start":84,"end":91,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_101.markups.1":{"type":"EM","start":239,"end":244,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_102":{"id":"a0caa2ca6b2c_102","name":"b0de","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"And finally, you’ll want users to be redirected if they’re not signed in. By default, the auth middleware redirects users to login.vue if they’re not signed in, so we just have to enable the auth middleware on index.vue:","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_102.markups.0","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_102.markups.0":{"type":"A","start":210,"end":219,"href":"https:\u002F\u002Fgithub.com\u002Ffishpercolator\u002Fautheg\u002Fblob\u002Fmaster\u002Fautheg-frontend\u002Fpages\u002Findex.vue","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_103":{"id":"a0caa2ca6b2c_103","name":"ff13","__typename":"Paragraph","type":"BQ","href":null,"layout":null,"metadata":null,"text":"middleware: [‘auth’],","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_104":{"id":"a0caa2ca6b2c_104","name":"c17a","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"You might also want to add a link to \u002Flogin to the toolbar in default.vue. It’s up to you.","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_105":{"id":"a0caa2ca6b2c_105","name":"a7d4","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Now try out your frontend app again!","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_106":{"id":"a0caa2ca6b2c_106","name":"48bb","__typename":"Paragraph","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*012-LUDxJttnF6Jtn0Cm7A.png","typename":"ImageMetadata"},"text":"Redirected to the login page when signed out","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*012-LUDxJttnF6Jtn0Cm7A.png":{"id":"1*012-LUDxJttnF6Jtn0Cm7A.png","originalHeight":719,"originalWidth":919,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:a0caa2ca6b2c_107":{"id":"a0caa2ca6b2c_107","name":"8da5","__typename":"Paragraph","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*X7EYUzlYqfSEDGUlTaK7vQ.png","typename":"ImageMetadata"},"text":"But I can see my examples when signed in!","hasDropCap":null,"dropCapImage":null,"markups":[],"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*X7EYUzlYqfSEDGUlTaK7vQ.png":{"id":"1*X7EYUzlYqfSEDGUlTaK7vQ.png","originalHeight":719,"originalWidth":919,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:a0caa2ca6b2c_108":{"id":"a0caa2ca6b2c_108","name":"fab0","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"This is where I leave you! It really is just the very beginning of the auth integration, but I hope you can see it’s not a huge amount of work to get going. You’ll want to add registration, and do things like make sure expired tokens don’t take precedence over credentials when signing in. [Edit: The maintainers of the auth module have agreed that expired tokens shouldn’t be sent with login request, and @nuxtjs\u002Fauth 4.2.0 fixes the issue.] The auth documentation and demo apps are a good place to start.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_108.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_108.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_108.markups.2","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_108.markups.0":{"type":"A","start":452,"end":465,"href":"https:\u002F\u002Fauth.nuxtjs.org\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_108.markups.1":{"type":"A","start":470,"end":479,"href":"https:\u002F\u002Fgithub.com\u002Fnuxt-community\u002Fauth-module\u002Ftree\u002Fdev\u002Fexamples","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_108.markups.2":{"type":"EM","start":290,"end":442,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_109":{"id":"a0caa2ca6b2c_109","name":"d5e6","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"If this article’s been helpful, please share it around, throw me a few claps, or let me know how you’re getting on in the comments.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_109.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_109.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_109.markups.0":{"type":"STRONG","start":0,"end":131,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_109.markups.1":{"type":"EM","start":0,"end":131,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_110":{"id":"a0caa2ca6b2c_110","name":"4148","__typename":"Paragraph","type":"P","href":null,"layout":null,"metadata":null,"text":"Update: You can now read this followup about how to deploy to Heroku!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_110.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:a0caa2ca6b2c_110.markups.1","typename":"Markup"}],"iframe":null,"mixtapeMetadata":null},"Paragraph:a0caa2ca6b2c_110.markups.0":{"type":"A","start":0,"end":69,"href":"https:\u002F\u002Fmedium.com\u002F@fishpercolator\u002Fdeploying-your-nuxt-rails-api-app-to-production-with-heroku-54efd09eec22","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:a0caa2ca6b2c_110.markups.1":{"type":"STRONG","start":0,"end":6,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Tag:ruby-on-rails":{"id":"ruby-on-rails","displayTitle":"Ruby on Rails","__typename":"Tag"},"Tag:nuxtjs":{"id":"nuxtjs","displayTitle":"Nuxtjs","__typename":"Tag"},"Tag:vuejs":{"id":"vuejs","displayTitle":"Vuejs","__typename":"Tag"},"Tag:jwt":{"id":"jwt","displayTitle":"Jwt","__typename":"Tag"},"Tag:single-page-applications":{"id":"single-page-applications","displayTitle":"Single Page Applications","__typename":"Tag"},"$Post:cf7dd9da9d16.previewContent":{"subtitle":"I’ve been a huge fan of Ruby on Rails since the early days, and although the web world has moved on a lot since then, Rails still has a…","__typename":"PreviewContent"}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.8cfaea53.js"></script><script src="https://cdn-client.medium.com/lite/static/js/vendors~main.82f8860a.chunk.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.d9d36f45.chunk.js"></script><script src="https://cdn-client.medium.com/lite/static/js/vendors~screen.landingpages.pres45~screen.post~screen.post.amp~screen.post.series~screen.profile~scr~a7af54c6.0a082142.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/screen.post~screen.post.amp~screen.post.series~screen.profile~screen.sequence.library~screen.sequenc~036c6b37.0409cc01.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/screen.landingpages.pres45~screen.post~screen.post.amp~screen.post.series~screen.profile~screen.sequ~84968f7b.5ebe23ac.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/screen.post~screen.post.amp~screen.sequence.post.dbcc6ace.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/screen.post.d5b67b3f.chunk.js"></script><script>window.main();</script></body></html>